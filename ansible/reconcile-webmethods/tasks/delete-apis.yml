---
# tasks/delete-apis.yml
# Delete orphaned APIs from webMethods Gateway
# (APIs that exist on Gateway but not in Git)

- name: "Initialize apis_deleted list"
  ansible.builtin.set_fact:
    apis_deleted: []

- name: "Delete orphaned APIs"
  ansible.builtin.include_tasks: delete-single-api.yml
  loop: "{{ apis_to_delete }}"
  loop_control:
    loop_var: api_name_to_delete
