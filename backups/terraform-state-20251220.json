{
  "version": 4,
  "terraform_version": "1.5.7",
  "serial": 229,
  "lineage": "b217eb92-9d0f-5183-5e2f-56c43ba27a9c",
  "outputs": {
    "access_instructions": {
      "value": "\nðŸŽ‰ APIM Platform deployed successfully!\n\nAccess your services:\n- webMethods Gateway: http://apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com:9072\n- Developer Portal:   http://apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com:18101/portal\n- Jenkins:           http://apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com:8080\n\nPrivate IPs (for Ansible):\n- webMethods: 10.0.10.87\n- Portal:     10.0.11.24\n- Jenkins:    10.0.10.104\n- Vault:      10.0.11.233\n\nNext steps:\n1. Configure services with Ansible:\n   cd ansible\n   ansible-playbook -i inventory/dev.ini playbooks/site.yml\n\n2. Stop instances when not in use to save costs:\n   ../scripts/stop-instances.sh dev\n",
      "type": "string"
    },
    "acm_certificate_arn": {
      "value": "arn:aws:acm:eu-west-1:848853684735:certificate/e7559f61-d180-46f4-92bd-cd15dab40ff7",
      "type": "string"
    },
    "acm_certificate_validation_options": {
      "value": [
        {
          "domain_name": "*.apim.cab-i.com",
          "resource_record_name": "_aae77ca1414d7deedc075905a82822fe.apim.cab-i.com.",
          "resource_record_type": "CNAME",
          "resource_record_value": "_82b7ce20122b8821dd8be7cdbb6f293d.jkddzztszm.acm-validations.aws."
        },
        {
          "domain_name": "apim.cab-i.com",
          "resource_record_name": "_aae77ca1414d7deedc075905a82822fe.apim.cab-i.com.",
          "resource_record_type": "CNAME",
          "resource_record_value": "_82b7ce20122b8821dd8be7cdbb6f293d.jkddzztszm.acm-validations.aws."
        }
      ],
      "type": [
        "set",
        [
          "object",
          {
            "domain_name": "string",
            "resource_record_name": "string",
            "resource_record_type": "string",
            "resource_record_value": "string"
          }
        ]
      ]
    },
    "alb_dns_name": {
      "value": "apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com",
      "type": "string"
    },
    "dns_instructions": {
      "value": "\n============================================================\nDNS CONFIGURATION FOR HOSTPAPA\n============================================================\n\nAdd the following CNAME records in your HostPapa DNS settings:\n\n1. Certificate Validation (REQUIRED FIRST):\n   Check 'acm_certificate_validation_options' output for the\n   exact CNAME record needed to validate the SSL certificate.\n\n2. Service DNS Records:\n\n   Host                          Type    Points to\n   ----                          ----    ---------\n   auth.apim         CNAME   apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com\n   api.apim          CNAME   apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com\n   admin.apim        CNAME   apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com\n   gateway.apim      CNAME   apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com\n   portal.apim       CNAME   apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com\n   jenkins.apim      CNAME   apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com\n\nOR use a wildcard:\n   *.apim            CNAME   apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com\n\n============================================================\n",
      "type": "string"
    },
    "jenkins_private_ip": {
      "value": "10.0.10.104",
      "type": "string"
    },
    "jenkins_url": {
      "value": "http://apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com:8080",
      "type": "string"
    },
    "k3s_connection_instructions": {
      "value": "\nK3s Cluster Connection Instructions:\n\n1. Get kubeconfig via SSM:\n   aws ssm get-parameter --name \"/k3s/dev/kubeconfig\" --with-decryption --query Parameter.Value --output text \u003e ~/.kube/config-k3s-dev\n   export KUBECONFIG=~/.kube/config-k3s-dev\n\n2. Connect via SSM Session Manager:\n   aws ssm start-session --target i-0f68a981d204e82a8\n\n3. On the instance, kubectl is available:\n   sudo kubectl get nodes\n   sudo kubectl get pods -A\n\n",
      "type": "string"
    },
    "k3s_server_id": {
      "value": "i-0f68a981d204e82a8",
      "type": "string"
    },
    "k3s_server_ip": {
      "value": "10.0.10.97",
      "type": "string"
    },
    "keycloak_instance_id": {
      "value": "i-0c844399fa2f70884",
      "type": "string"
    },
    "keycloak_private_ip": {
      "value": "10.0.10.21",
      "type": "string"
    },
    "keycloak_url": {
      "value": "http://apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com:8180",
      "type": "string"
    },
    "kms_key_id": {
      "value": "62812b02-ef47-48cf-955b-355b831e2c9e",
      "type": "string"
    },
    "portal_private_ip": {
      "value": "10.0.11.24",
      "type": "string"
    },
    "portal_url": {
      "value": "http://apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com:18101/portal",
      "type": "string"
    },
    "private_subnet_ids": {
      "value": [
        "subnet-0ccaad7473290c6cb",
        "subnet-020d367b03dfaa70b"
      ],
      "type": [
        "tuple",
        [
          "string",
          "string"
        ]
      ]
    },
    "public_subnet_ids": {
      "value": [
        "subnet-0a10a297cb6fbbf99",
        "subnet-062d25cec2f53b479"
      ],
      "type": [
        "tuple",
        [
          "string",
          "string"
        ]
      ]
    },
    "service_urls": {
      "value": {
        "gateway": "https://gateway.apim.cab-i.com",
        "jenkins": "https://jenkins.apim.cab-i.com",
        "keycloak": "https://auth.apim.cab-i.com",
        "portal": "https://portal.apim.cab-i.com"
      },
      "type": [
        "object",
        {
          "gateway": "string",
          "jenkins": "string",
          "keycloak": "string",
          "portal": "string"
        }
      ]
    },
    "vault_private_ip": {
      "value": "10.0.11.233",
      "type": "string"
    },
    "vpc_id": {
      "value": "vpc-0543d8ac2b5b9024e",
      "type": "string"
    },
    "webmethods_private_ip": {
      "value": "10.0.10.87",
      "type": "string"
    },
    "webmethods_url": {
      "value": "http://apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com:9072",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "848853684735",
            "arn": "arn:aws:iam::848853684735:user/admin",
            "id": "848853684735",
            "user_id": "AIDA4LI47KH755NVYRW3C"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_acm_certificate",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:acm:eu-west-1:848853684735:certificate/e7559f61-d180-46f4-92bd-cd15dab40ff7",
            "certificate_authority_arn": "",
            "certificate_body": null,
            "certificate_chain": null,
            "domain_name": "*.apim.cab-i.com",
            "domain_validation_options": [
              {
                "domain_name": "*.apim.cab-i.com",
                "resource_record_name": "_aae77ca1414d7deedc075905a82822fe.apim.cab-i.com.",
                "resource_record_type": "CNAME",
                "resource_record_value": "_82b7ce20122b8821dd8be7cdbb6f293d.jkddzztszm.acm-validations.aws."
              },
              {
                "domain_name": "apim.cab-i.com",
                "resource_record_name": "_aae77ca1414d7deedc075905a82822fe.apim.cab-i.com.",
                "resource_record_type": "CNAME",
                "resource_record_value": "_82b7ce20122b8821dd8be7cdbb6f293d.jkddzztszm.acm-validations.aws."
              }
            ],
            "early_renewal_duration": "",
            "id": "arn:aws:acm:eu-west-1:848853684735:certificate/e7559f61-d180-46f4-92bd-cd15dab40ff7",
            "key_algorithm": "RSA_2048",
            "not_after": "2027-01-17T23:59:59Z",
            "not_before": "2025-12-19T00:00:00Z",
            "options": [
              {
                "certificate_transparency_logging_preference": "ENABLED"
              }
            ],
            "pending_renewal": false,
            "private_key": null,
            "renewal_eligibility": "ELIGIBLE",
            "renewal_summary": [],
            "status": "ISSUED",
            "subject_alternative_names": [
              "*.apim.cab-i.com",
              "apim.cab-i.com"
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-wildcard-cert-dev",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-wildcard-cert-dev",
              "Project": "APIM"
            },
            "type": "AMAZON_ISSUED",
            "validation_emails": [],
            "validation_method": "DNS",
            "validation_option": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "create_before_destroy": true
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "vault",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:eu-west-1:848853684735:alias/apim-vault-dev",
            "id": "alias/apim-vault-dev",
            "name": "alias/apim-vault-dev",
            "name_prefix": "",
            "target_key_arn": "arn:aws:kms:eu-west-1:848853684735:key/62812b02-ef47-48cf-955b-355b831e2c9e",
            "target_key_id": "62812b02-ef47-48cf-955b-355b831e2c9e"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_kms_key.vault"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "vault",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:eu-west-1:848853684735:key/62812b02-ef47-48cf-955b-355b831e2c9e",
            "bypass_policy_lockout_safety_check": false,
            "custom_key_store_id": "",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": 10,
            "description": "KMS key for Vault auto-unseal",
            "enable_key_rotation": false,
            "id": "62812b02-ef47-48cf-955b-355b831e2c9e",
            "is_enabled": true,
            "key_id": "62812b02-ef47-48cf-955b-355b831e2c9e",
            "key_usage": "ENCRYPT_DECRYPT",
            "multi_region": false,
            "policy": "{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::848853684735:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}",
            "rotation_period_in_days": 0,
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "vault-unseal-key",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "vault-unseal-key",
              "Project": "APIM"
            },
            "timeouts": null,
            "xks_key_id": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDB9fQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_listener",
      "name": "https",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alpn_policy": null,
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/4a34cd6b1c4d80dd",
            "certificate_arn": "arn:aws:acm:eu-west-1:848853684735:certificate/e7559f61-d180-46f4-92bd-cd15dab40ff7",
            "default_action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [
                  {
                    "content_type": "text/html",
                    "message_body": "\u003chtml\u003e\u003cbody\u003e\u003ch1\u003eAPIM Platform\u003c/h1\u003e\u003cp\u003eUse the correct subdomain to access services.\u003c/p\u003e\u003c/body\u003e\u003c/html\u003e",
                    "status_code": "200"
                  }
                ],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "",
                "type": "fixed-response"
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/4a34cd6b1c4d80dd",
            "load_balancer_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:loadbalancer/app/apim-alb-dev/6e063017bb17d1dd",
            "mutual_authentication": [
              {
                "advertise_trust_store_ca_names": "",
                "ignore_client_certificate_expiry": false,
                "mode": "off",
                "trust_store_arn": ""
              }
            ],
            "port": 443,
            "protocol": "HTTPS",
            "routing_http_request_x_amzn_mtls_clientcert_header_name": "",
            "routing_http_request_x_amzn_mtls_clientcert_issuer_header_name": "",
            "routing_http_request_x_amzn_mtls_clientcert_leaf_header_name": "",
            "routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name": "",
            "routing_http_request_x_amzn_mtls_clientcert_subject_header_name": "",
            "routing_http_request_x_amzn_mtls_clientcert_validity_header_name": "",
            "routing_http_request_x_amzn_tls_cipher_suite_header_name": "",
            "routing_http_request_x_amzn_tls_version_header_name": "",
            "routing_http_response_access_control_allow_credentials_header_value": "",
            "routing_http_response_access_control_allow_headers_header_value": "",
            "routing_http_response_access_control_allow_methods_header_value": "",
            "routing_http_response_access_control_allow_origin_header_value": "",
            "routing_http_response_access_control_expose_headers_header_value": "",
            "routing_http_response_access_control_max_age_header_value": "",
            "routing_http_response_content_security_policy_header_value": "",
            "routing_http_response_server_enabled": true,
            "routing_http_response_strict_transport_security_header_value": "",
            "routing_http_response_x_content_type_options_header_value": "",
            "routing_http_response_x_frame_options_header_value": "",
            "ssl_policy": "ELBSecurityPolicy-TLS13-1-2-2021-06",
            "tags": {},
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tcp_idle_timeout_seconds": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsInVwZGF0ZSI6MzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "aws_acm_certificate.main",
            "aws_security_group.alb",
            "module.alb.aws_lb.main",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_listener",
      "name": "keycloak_direct",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alpn_policy": null,
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/7313932bed6db0b5",
            "certificate_arn": null,
            "default_action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-keycloak-dev/9622b0daa07d4e09",
                "type": "forward"
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/7313932bed6db0b5",
            "load_balancer_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:loadbalancer/app/apim-alb-dev/6e063017bb17d1dd",
            "mutual_authentication": [],
            "port": 8180,
            "protocol": "HTTP",
            "routing_http_request_x_amzn_mtls_clientcert_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_issuer_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_leaf_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_subject_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_validity_header_name": null,
            "routing_http_request_x_amzn_tls_cipher_suite_header_name": null,
            "routing_http_request_x_amzn_tls_version_header_name": null,
            "routing_http_response_access_control_allow_credentials_header_value": "",
            "routing_http_response_access_control_allow_headers_header_value": "",
            "routing_http_response_access_control_allow_methods_header_value": "",
            "routing_http_response_access_control_allow_origin_header_value": "",
            "routing_http_response_access_control_expose_headers_header_value": "",
            "routing_http_response_access_control_max_age_header_value": "",
            "routing_http_response_content_security_policy_header_value": "",
            "routing_http_response_server_enabled": true,
            "routing_http_response_strict_transport_security_header_value": "",
            "routing_http_response_x_content_type_options_header_value": "",
            "routing_http_response_x_frame_options_header_value": "",
            "ssl_policy": "",
            "tags": {},
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tcp_idle_timeout_seconds": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsInVwZGF0ZSI6MzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "aws_security_group.alb",
            "module.alb.aws_lb.main",
            "module.keycloak.aws_lb_target_group.keycloak",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_listener_rule",
      "name": "gateway_https",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-webmethods-dev/fccd5bb6cfa6316c",
                "type": "forward"
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/4a34cd6b1c4d80dd/9ca760fc7ed2211b",
            "condition": [
              {
                "host_header": [
                  {
                    "values": [
                      "gateway.apim.cab-i.com"
                    ]
                  }
                ],
                "http_header": [],
                "http_request_method": [],
                "path_pattern": [],
                "query_string": [],
                "source_ip": []
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/4a34cd6b1c4d80dd/9ca760fc7ed2211b",
            "listener_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/4a34cd6b1c4d80dd",
            "priority": 20,
            "tags": {},
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_acm_certificate.main",
            "aws_lb_listener.https",
            "aws_security_group.alb",
            "module.alb.aws_lb.main",
            "module.alb.aws_lb_target_group.webmethods",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_listener_rule",
      "name": "jenkins_https",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-jenkins-https-dev/bc296e58a239949e",
                "type": "forward"
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/4a34cd6b1c4d80dd/9f7cf4fca2395209",
            "condition": [
              {
                "host_header": [
                  {
                    "values": [
                      "jenkins.apim.cab-i.com"
                    ]
                  }
                ],
                "http_header": [],
                "http_request_method": [],
                "path_pattern": [],
                "query_string": [],
                "source_ip": []
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/4a34cd6b1c4d80dd/9f7cf4fca2395209",
            "listener_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/4a34cd6b1c4d80dd",
            "priority": 40,
            "tags": {},
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_acm_certificate.main",
            "aws_lb_listener.https",
            "aws_lb_target_group.jenkins_https",
            "aws_security_group.alb",
            "module.alb.aws_lb.main",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_listener_rule",
      "name": "k3s_api",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/k3s-http-dev/a67412990ba7ebcb",
                "type": "forward"
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/1a3c3545210eb84b",
            "condition": [
              {
                "host_header": [
                  {
                    "values": [
                      "api.apim.cab-i.com"
                    ]
                  }
                ],
                "http_header": [],
                "http_request_method": [],
                "path_pattern": [],
                "query_string": [],
                "source_ip": []
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/1a3c3545210eb84b",
            "listener_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a",
            "priority": 11,
            "tags": null,
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.alb.aws_lb_listener.http",
            "module.alb.aws_lb_listener.https",
            "module.k3s.aws_lb_target_group.k3s_http",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_listener_rule",
      "name": "k3s_auth",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/k3s-http-dev/a67412990ba7ebcb",
                "type": "forward"
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/a4459068167bf90d",
            "condition": [
              {
                "host_header": [
                  {
                    "values": [
                      "auth.apim.cab-i.com"
                    ]
                  }
                ],
                "http_header": [],
                "http_request_method": [],
                "path_pattern": [],
                "query_string": [],
                "source_ip": []
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/a4459068167bf90d",
            "listener_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a",
            "priority": 10,
            "tags": null,
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.alb.aws_lb_listener.http",
            "module.alb.aws_lb_listener.https",
            "module.k3s.aws_lb_target_group.k3s_http",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_listener_rule",
      "name": "k3s_awx",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/k3s-http-dev/a67412990ba7ebcb",
                "type": "forward"
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/462824d389016694",
            "condition": [
              {
                "host_header": [
                  {
                    "values": [
                      "awx.apim.cab-i.com"
                    ]
                  }
                ],
                "http_header": [],
                "http_request_method": [],
                "path_pattern": [],
                "query_string": [],
                "source_ip": []
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/462824d389016694",
            "listener_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a",
            "priority": 15,
            "tags": null,
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.alb.aws_lb_listener.http",
            "module.alb.aws_lb_listener.https",
            "module.k3s.aws_lb_target_group.k3s_http",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_listener_rule",
      "name": "k3s_devops",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/k3s-http-dev/a67412990ba7ebcb",
                "type": "forward"
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/086f8443c7e25d9a",
            "condition": [
              {
                "host_header": [
                  {
                    "values": [
                      "devops.apim.cab-i.com"
                    ]
                  }
                ],
                "http_header": [],
                "http_request_method": [],
                "path_pattern": [],
                "query_string": [],
                "source_ip": []
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/086f8443c7e25d9a",
            "listener_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a",
            "priority": 12,
            "tags": null,
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.alb.aws_lb_listener.http",
            "module.alb.aws_lb_listener.https",
            "module.k3s.aws_lb_target_group.k3s_http",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_listener_rule",
      "name": "k3s_grafana",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/k3s-http-dev/a67412990ba7ebcb",
                "type": "forward"
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/45f5b7a2baffb80c",
            "condition": [
              {
                "host_header": [
                  {
                    "values": [
                      "grafana.apim.cab-i.com"
                    ]
                  }
                ],
                "http_header": [],
                "http_request_method": [],
                "path_pattern": [],
                "query_string": [],
                "source_ip": []
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/45f5b7a2baffb80c",
            "listener_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a",
            "priority": 13,
            "tags": null,
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.alb.aws_lb_listener.http",
            "module.alb.aws_lb_listener.https",
            "module.k3s.aws_lb_target_group.k3s_http",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_listener_rule",
      "name": "k3s_vault",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/k3s-http-dev/a67412990ba7ebcb",
                "type": "forward"
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/78313c04af7e0f2d",
            "condition": [
              {
                "host_header": [
                  {
                    "values": [
                      "vault.apim.cab-i.com"
                    ]
                  }
                ],
                "http_header": [],
                "http_request_method": [],
                "path_pattern": [],
                "query_string": [],
                "source_ip": []
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/78313c04af7e0f2d",
            "listener_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a",
            "priority": 14,
            "tags": null,
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.alb.aws_lb_listener.http",
            "module.alb.aws_lb_listener.https",
            "module.k3s.aws_lb_target_group.k3s_http",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_listener_rule",
      "name": "keycloak_https",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-keycloak-dev/9622b0daa07d4e09",
                "type": "forward"
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/4a34cd6b1c4d80dd/ef22293f317dadbc",
            "condition": [
              {
                "host_header": [
                  {
                    "values": [
                      "auth.apim.cab-i.com"
                    ]
                  }
                ],
                "http_header": [],
                "http_request_method": [],
                "path_pattern": [],
                "query_string": [],
                "source_ip": []
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/4a34cd6b1c4d80dd/ef22293f317dadbc",
            "listener_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/4a34cd6b1c4d80dd",
            "priority": 10,
            "tags": {},
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_acm_certificate.main",
            "aws_lb_listener.https",
            "aws_security_group.alb",
            "module.alb.aws_lb.main",
            "module.keycloak.aws_lb_target_group.keycloak",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_listener_rule",
      "name": "portal_https",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-portal-https-dev/2b4ae3cb65c474ff",
                "type": "forward"
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/4a34cd6b1c4d80dd/119b95056d09f54b",
            "condition": [
              {
                "host_header": [
                  {
                    "values": [
                      "portal.apim.cab-i.com"
                    ]
                  }
                ],
                "http_header": [],
                "http_request_method": [],
                "path_pattern": [],
                "query_string": [],
                "source_ip": []
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/4a34cd6b1c4d80dd/119b95056d09f54b",
            "listener_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/4a34cd6b1c4d80dd",
            "priority": 30,
            "tags": {},
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_acm_certificate.main",
            "aws_lb_listener.https",
            "aws_lb_target_group.portal_https",
            "aws_security_group.alb",
            "module.alb.aws_lb.main",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "jenkins_https",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-jenkins-https-dev/bc296e58a239949e",
            "arn_suffix": "targetgroup/apim-jenkins-https-dev/bc296e58a239949e",
            "connection_termination": null,
            "deregistration_delay": "300",
            "health_check": [
              {
                "enabled": true,
                "healthy_threshold": 2,
                "interval": 30,
                "matcher": "200",
                "path": "/login",
                "port": "traffic-port",
                "protocol": "HTTP",
                "timeout": 5,
                "unhealthy_threshold": 3
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-jenkins-https-dev/bc296e58a239949e",
            "ip_address_type": "ipv4",
            "lambda_multi_value_headers_enabled": false,
            "load_balancer_arns": [
              "arn:aws:elasticloadbalancing:eu-west-1:848853684735:loadbalancer/app/apim-alb-dev/6e063017bb17d1dd"
            ],
            "load_balancing_algorithm_type": "round_robin",
            "load_balancing_anomaly_mitigation": "off",
            "load_balancing_cross_zone_enabled": "use_load_balancer_configuration",
            "name": "apim-jenkins-https-dev",
            "name_prefix": "",
            "port": 8080,
            "preserve_client_ip": null,
            "protocol": "HTTP",
            "protocol_version": "HTTP1",
            "proxy_protocol_v2": false,
            "slow_start": 0,
            "stickiness": [
              {
                "cookie_duration": 86400,
                "cookie_name": "",
                "enabled": false,
                "type": "lb_cookie"
              }
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "jenkins-https-tg",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "jenkins-https-tg",
              "Project": "APIM"
            },
            "target_failover": [
              {
                "on_deregistration": null,
                "on_unhealthy": null
              }
            ],
            "target_group_health": [
              {
                "dns_failover": [
                  {
                    "minimum_healthy_targets_count": "1",
                    "minimum_healthy_targets_percentage": "off"
                  }
                ],
                "unhealthy_state_routing": [
                  {
                    "minimum_healthy_targets_count": 1,
                    "minimum_healthy_targets_percentage": "off"
                  }
                ]
              }
            ],
            "target_health_state": [
              {
                "enable_unhealthy_connection_termination": null,
                "unhealthy_draining_interval": null
              }
            ],
            "target_type": "instance",
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "portal_https",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-portal-https-dev/2b4ae3cb65c474ff",
            "arn_suffix": "targetgroup/apim-portal-https-dev/2b4ae3cb65c474ff",
            "connection_termination": null,
            "deregistration_delay": "300",
            "health_check": [
              {
                "enabled": true,
                "healthy_threshold": 2,
                "interval": 30,
                "matcher": "200,302",
                "path": "/portal",
                "port": "traffic-port",
                "protocol": "HTTP",
                "timeout": 5,
                "unhealthy_threshold": 3
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-portal-https-dev/2b4ae3cb65c474ff",
            "ip_address_type": "ipv4",
            "lambda_multi_value_headers_enabled": false,
            "load_balancer_arns": [
              "arn:aws:elasticloadbalancing:eu-west-1:848853684735:loadbalancer/app/apim-alb-dev/6e063017bb17d1dd"
            ],
            "load_balancing_algorithm_type": "round_robin",
            "load_balancing_anomaly_mitigation": "off",
            "load_balancing_cross_zone_enabled": "use_load_balancer_configuration",
            "name": "apim-portal-https-dev",
            "name_prefix": "",
            "port": 18101,
            "preserve_client_ip": null,
            "protocol": "HTTP",
            "protocol_version": "HTTP1",
            "proxy_protocol_v2": false,
            "slow_start": 0,
            "stickiness": [
              {
                "cookie_duration": 86400,
                "cookie_name": "",
                "enabled": false,
                "type": "lb_cookie"
              }
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "portal-https-tg",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "portal-https-tg",
              "Project": "APIM"
            },
            "target_failover": [
              {
                "on_deregistration": null,
                "on_unhealthy": null
              }
            ],
            "target_group_health": [
              {
                "dns_failover": [
                  {
                    "minimum_healthy_targets_count": "1",
                    "minimum_healthy_targets_percentage": "off"
                  }
                ],
                "unhealthy_state_routing": [
                  {
                    "minimum_healthy_targets_count": 1,
                    "minimum_healthy_targets_percentage": "off"
                  }
                ]
              }
            ],
            "target_health_state": [
              {
                "enable_unhealthy_connection_termination": null,
                "unhealthy_draining_interval": null
              }
            ],
            "target_type": "instance",
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_target_group_attachment",
      "name": "jenkins_https",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_zone": null,
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-jenkins-https-dev/bc296e58a239949e-20251219131513904800000003",
            "port": 8080,
            "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-jenkins-https-dev/bc296e58a239949e",
            "target_id": "i-0550290687f536536"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_lb_target_group.jenkins_https",
            "aws_security_group.alb",
            "aws_security_group.jenkins",
            "module.ec2.aws_instance.jenkins",
            "module.ec2.data.aws_ami.amazon_linux_2",
            "module.iam.aws_iam_instance_profile.jenkins",
            "module.iam.aws_iam_role.jenkins",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lb_target_group_attachment",
      "name": "portal_https",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_zone": null,
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-portal-https-dev/2b4ae3cb65c474ff-20251219131514062500000005",
            "port": 18101,
            "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-portal-https-dev/2b4ae3cb65c474ff",
            "target_id": "i-04fb38556aa3eaaff"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_lb_target_group.portal_https",
            "aws_s3_bucket.artifacts",
            "aws_security_group.alb",
            "aws_security_group.portal",
            "aws_security_group.webmethods",
            "module.ec2.aws_instance.portal",
            "module.ec2.aws_instance.webmethods",
            "module.ec2.data.aws_ami.amazon_linux_2",
            "module.iam.aws_iam_instance_profile.portal",
            "module.iam.aws_iam_instance_profile.webmethods",
            "module.iam.aws_iam_role.portal",
            "module.iam.aws_iam_role.webmethods",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "artifacts",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::apim-artifacts-dev",
            "bucket": "apim-artifacts-dev",
            "bucket_domain_name": "apim-artifacts-dev.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "apim-artifacts-dev.s3.eu-west-1.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [
              {
                "id": "9ef23a4ca2b1d96382a9b44480538a630971747858abd4f792d410586c6dc13e",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z1BKCTXD74EZPE",
            "id": "apim-artifacts-dev",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "eu-west-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "APIM Artifacts",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "APIM Artifacts",
              "Project": "APIM"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": true,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "backups",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::apim-backups-dev",
            "bucket": "apim-backups-dev",
            "bucket_domain_name": "apim-backups-dev.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "apim-backups-dev.s3.eu-west-1.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [
              {
                "id": "9ef23a4ca2b1d96382a9b44480538a630971747858abd4f792d410586c6dc13e",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z1BKCTXD74EZPE",
            "id": "apim-backups-dev",
            "lifecycle_rule": [
              {
                "abort_incomplete_multipart_upload_days": 0,
                "enabled": true,
                "expiration": [
                  {
                    "date": "",
                    "days": 90,
                    "expired_object_delete_marker": false
                  }
                ],
                "id": "archive-old-backups",
                "noncurrent_version_expiration": [],
                "noncurrent_version_transition": [],
                "prefix": "",
                "tags": {},
                "transition": [
                  {
                    "date": "",
                    "days": 30,
                    "storage_class": "GLACIER"
                  }
                ]
              }
            ],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "eu-west-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "APIM Backups",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "APIM Backups",
              "Project": "APIM"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": true,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "vault_storage",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::apim-vault-storage-dev",
            "bucket": "apim-vault-storage-dev",
            "bucket_domain_name": "apim-vault-storage-dev.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "apim-vault-storage-dev.s3.eu-west-1.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [
              {
                "id": "9ef23a4ca2b1d96382a9b44480538a630971747858abd4f792d410586c6dc13e",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z1BKCTXD74EZPE",
            "id": "apim-vault-storage-dev",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "eu-west-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "Vault Storage Backend",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "Vault Storage Backend",
              "Project": "APIM"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": true,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket_lifecycle_configuration",
      "name": "backups",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "bucket": "apim-backups-dev",
            "expected_bucket_owner": "",
            "id": "apim-backups-dev",
            "rule": [
              {
                "abort_incomplete_multipart_upload": [],
                "expiration": [
                  {
                    "date": null,
                    "days": 90,
                    "expired_object_delete_marker": false
                  }
                ],
                "filter": [
                  {
                    "and": [],
                    "object_size_greater_than": null,
                    "object_size_less_than": null,
                    "prefix": "",
                    "tag": []
                  }
                ],
                "id": "archive-old-backups",
                "noncurrent_version_expiration": [],
                "noncurrent_version_transition": [],
                "prefix": "",
                "status": "Enabled",
                "transition": [
                  {
                    "date": null,
                    "days": 30,
                    "storage_class": "GLACIER"
                  }
                ]
              }
            ],
            "timeouts": null,
            "transition_default_minimum_object_size": "all_storage_classes_128K"
          },
          "sensitive_attributes": [],
          "dependencies": [
            "aws_s3_bucket.backups"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket_versioning",
      "name": "artifacts",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "apim-artifacts-dev",
            "expected_bucket_owner": "",
            "id": "apim-artifacts-dev",
            "mfa": null,
            "versioning_configuration": [
              {
                "mfa_delete": "",
                "status": "Enabled"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.artifacts"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket_versioning",
      "name": "backups",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "apim-backups-dev",
            "expected_bucket_owner": "",
            "id": "apim-backups-dev",
            "mfa": null,
            "versioning_configuration": [
              {
                "mfa_delete": "",
                "status": "Enabled"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.backups"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket_versioning",
      "name": "vault_storage",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "apim-vault-storage-dev",
            "expected_bucket_owner": "",
            "id": "apim-vault-storage-dev",
            "mfa": null,
            "versioning_configuration": [
              {
                "mfa_delete": "",
                "status": "Enabled"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.vault_storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_security_group",
      "name": "alb",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:security-group/sg-0e28af9bb36cfd149",
            "description": "Security group for Application Load Balancer",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0e28af9bb36cfd149",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "HTTP from internet (redirect to HTTPS)",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "HTTPS from internet",
                "from_port": 443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 443
              }
            ],
            "name": "apim-alb-sg-dev",
            "name_prefix": "",
            "owner_id": "848853684735",
            "revoke_rules_on_delete": false,
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-alb-sg",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-alb-sg",
              "Project": "APIM"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_security_group",
      "name": "jenkins",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:security-group/sg-0a4c1e066c53d7083",
            "description": "Security group for Jenkins",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0a4c1e066c53d7083",
            "ingress": [
              {
                "cidr_blocks": [],
                "description": "Jenkins from ALB",
                "from_port": 8080,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [
                  "sg-0e28af9bb36cfd149"
                ],
                "self": false,
                "to_port": 8080
              }
            ],
            "name": "apim-jenkins-sg-dev",
            "name_prefix": "",
            "owner_id": "848853684735",
            "revoke_rules_on_delete": false,
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-jenkins-sg",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-jenkins-sg",
              "Project": "APIM"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "aws_security_group.alb",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_security_group",
      "name": "portal",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:security-group/sg-07ce6a398e72afa26",
            "description": "Security group for Developer Portal",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-07ce6a398e72afa26",
            "ingress": [
              {
                "cidr_blocks": [],
                "description": "Portal HTTPS from ALB",
                "from_port": 18101,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [
                  "sg-0e28af9bb36cfd149"
                ],
                "self": false,
                "to_port": 18101
              }
            ],
            "name": "apim-portal-sg-dev",
            "name_prefix": "",
            "owner_id": "848853684735",
            "revoke_rules_on_delete": false,
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-portal-sg",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-portal-sg",
              "Project": "APIM"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "aws_security_group.alb",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_security_group",
      "name": "vault",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:security-group/sg-09bed30be668370ba",
            "description": "Security group for Vault",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-09bed30be668370ba",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.0.0.0/16"
                ],
                "description": "Vault API from VPC",
                "from_port": 8200,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 8200
              }
            ],
            "name": "apim-vault-sg-dev",
            "name_prefix": "",
            "owner_id": "848853684735",
            "revoke_rules_on_delete": false,
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-vault-sg",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-vault-sg",
              "Project": "APIM"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_security_group",
      "name": "webmethods",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:security-group/sg-04ab3e8c7501869c7",
            "description": "Security group for webMethods Gateway",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-04ab3e8c7501869c7",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.0.0.0/16"
                ],
                "description": "webMethods Runtime HTTP from VPC",
                "from_port": 5555,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 5555
              },
              {
                "cidr_blocks": [
                  "10.0.0.0/16"
                ],
                "description": "webMethods Runtime HTTPS from VPC",
                "from_port": 5543,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 5543
              },
              {
                "cidr_blocks": [],
                "description": "webMethods UI from ALB",
                "from_port": 9072,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [
                  "sg-0e28af9bb36cfd149"
                ],
                "self": false,
                "to_port": 9072
              }
            ],
            "name": "apim-webmethods-sg-dev",
            "name_prefix": "",
            "owner_id": "848853684735",
            "revoke_rules_on_delete": false,
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-webmethods-sg",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-webmethods-sg",
              "Project": "APIM"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "aws_security_group.alb",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_security_group_rule",
      "name": "alb_keycloak_ingress",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "cidr_blocks": [
              "0.0.0.0/0"
            ],
            "description": "Keycloak HTTP access",
            "from_port": 8180,
            "id": "sgrule-1279541674",
            "ipv6_cidr_blocks": null,
            "prefix_list_ids": null,
            "protocol": "tcp",
            "security_group_id": "sg-0e28af9bb36cfd149",
            "security_group_rule_id": "sgr-0ba8378783d9ffa54",
            "self": false,
            "source_security_group_id": null,
            "timeouts": null,
            "to_port": 8180,
            "type": "ingress"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "aws_security_group.alb",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.alb",
      "mode": "managed",
      "type": "aws_lb",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_logs": [
              {
                "bucket": "",
                "enabled": false,
                "prefix": ""
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:loadbalancer/app/apim-alb-dev/6e063017bb17d1dd",
            "arn_suffix": "app/apim-alb-dev/6e063017bb17d1dd",
            "client_keep_alive": 3600,
            "connection_logs": [
              {
                "bucket": "",
                "enabled": false,
                "prefix": ""
              }
            ],
            "customer_owned_ipv4_pool": "",
            "desync_mitigation_mode": "defensive",
            "dns_name": "apim-alb-dev-102669695.eu-west-1.elb.amazonaws.com",
            "dns_record_client_routing_policy": null,
            "drop_invalid_header_fields": false,
            "enable_cross_zone_load_balancing": true,
            "enable_deletion_protection": false,
            "enable_http2": true,
            "enable_tls_version_and_cipher_suite_headers": false,
            "enable_waf_fail_open": false,
            "enable_xff_client_port": false,
            "enable_zonal_shift": false,
            "enforce_security_group_inbound_rules_on_private_link_traffic": "",
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:loadbalancer/app/apim-alb-dev/6e063017bb17d1dd",
            "idle_timeout": 60,
            "internal": false,
            "ip_address_type": "ipv4",
            "ipam_pools": [],
            "load_balancer_type": "application",
            "minimum_load_balancer_capacity": [],
            "name": "apim-alb-dev",
            "name_prefix": "",
            "preserve_host_header": false,
            "security_groups": [
              "sg-0e28af9bb36cfd149"
            ],
            "subnet_mapping": [
              {
                "allocation_id": "",
                "ipv6_address": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-062d25cec2f53b479"
              },
              {
                "allocation_id": "",
                "ipv6_address": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-0a10a297cb6fbbf99"
              }
            ],
            "subnets": [
              "subnet-062d25cec2f53b479",
              "subnet-0a10a297cb6fbbf99"
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-alb-dev",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-alb-dev",
              "Project": "APIM"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e",
            "xff_header_processing_mode": "append",
            "zone_id": "Z32O12XQLNTSW2"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_security_group.alb",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.alb",
      "mode": "managed",
      "type": "aws_lb_listener",
      "name": "http",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alpn_policy": null,
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a",
            "certificate_arn": null,
            "default_action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [
                  {
                    "content_type": "text/html",
                    "message_body": "\u003chtml\u003e\n  \u003chead\u003e\u003ctitle\u003eAPIM Platform\u003c/title\u003e\u003c/head\u003e\n  \u003cbody\u003e\n    \u003ch1\u003eWelcome to APIM Platform\u003c/h1\u003e\n    \u003cp\u003eAvailable services:\u003c/p\u003e\n    \u003cul\u003e\n      \u003cli\u003e\u003ca href=\"/webmethods\"\u003ewebMethods API Gateway (port 9072)\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"/portal\"\u003eDeveloper Portal (port 18101)\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"/jenkins\"\u003eJenkins (port 8080)\u003c/a\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n    \u003cp\u003eUse path-based routing or direct port access\u003c/p\u003e\n  \u003c/body\u003e\n\u003c/html\u003e\n",
                    "status_code": "200"
                  }
                ],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "",
                "type": "fixed-response"
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a",
            "load_balancer_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:loadbalancer/app/apim-alb-dev/6e063017bb17d1dd",
            "mutual_authentication": [],
            "port": 80,
            "protocol": "HTTP",
            "routing_http_request_x_amzn_mtls_clientcert_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_issuer_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_leaf_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_subject_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_validity_header_name": null,
            "routing_http_request_x_amzn_tls_cipher_suite_header_name": null,
            "routing_http_request_x_amzn_tls_version_header_name": null,
            "routing_http_response_access_control_allow_credentials_header_value": "",
            "routing_http_response_access_control_allow_headers_header_value": "",
            "routing_http_response_access_control_allow_methods_header_value": "",
            "routing_http_response_access_control_allow_origin_header_value": "",
            "routing_http_response_access_control_expose_headers_header_value": "",
            "routing_http_response_access_control_max_age_header_value": "",
            "routing_http_response_content_security_policy_header_value": "",
            "routing_http_response_server_enabled": true,
            "routing_http_response_strict_transport_security_header_value": "",
            "routing_http_response_x_content_type_options_header_value": "",
            "routing_http_response_x_frame_options_header_value": "",
            "ssl_policy": "",
            "tags": {},
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tcp_idle_timeout_seconds": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsInVwZGF0ZSI6MzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "aws_security_group.alb",
            "module.alb.aws_lb.main",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.alb",
      "mode": "managed",
      "type": "aws_lb_listener",
      "name": "jenkins_direct",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alpn_policy": null,
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/db8f10f674f70ef0",
            "certificate_arn": null,
            "default_action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-jenkins-dev/8329841bf62c8244",
                "type": "forward"
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/db8f10f674f70ef0",
            "load_balancer_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:loadbalancer/app/apim-alb-dev/6e063017bb17d1dd",
            "mutual_authentication": [],
            "port": 8080,
            "protocol": "HTTP",
            "routing_http_request_x_amzn_mtls_clientcert_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_issuer_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_leaf_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_subject_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_validity_header_name": null,
            "routing_http_request_x_amzn_tls_cipher_suite_header_name": null,
            "routing_http_request_x_amzn_tls_version_header_name": null,
            "routing_http_response_access_control_allow_credentials_header_value": "",
            "routing_http_response_access_control_allow_headers_header_value": "",
            "routing_http_response_access_control_allow_methods_header_value": "",
            "routing_http_response_access_control_allow_origin_header_value": "",
            "routing_http_response_access_control_expose_headers_header_value": "",
            "routing_http_response_access_control_max_age_header_value": "",
            "routing_http_response_content_security_policy_header_value": "",
            "routing_http_response_server_enabled": true,
            "routing_http_response_strict_transport_security_header_value": "",
            "routing_http_response_x_content_type_options_header_value": "",
            "routing_http_response_x_frame_options_header_value": "",
            "ssl_policy": "",
            "tags": {},
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tcp_idle_timeout_seconds": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsInVwZGF0ZSI6MzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "aws_security_group.alb",
            "module.alb.aws_lb.main",
            "module.alb.aws_lb_target_group.jenkins",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.alb",
      "mode": "managed",
      "type": "aws_lb_listener",
      "name": "portal_direct",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alpn_policy": null,
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/a8919a369eeb94a5",
            "certificate_arn": null,
            "default_action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-portal-dev/031e92fc28a059ae",
                "type": "forward"
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/a8919a369eeb94a5",
            "load_balancer_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:loadbalancer/app/apim-alb-dev/6e063017bb17d1dd",
            "mutual_authentication": [],
            "port": 18101,
            "protocol": "HTTP",
            "routing_http_request_x_amzn_mtls_clientcert_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_issuer_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_leaf_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_subject_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_validity_header_name": null,
            "routing_http_request_x_amzn_tls_cipher_suite_header_name": null,
            "routing_http_request_x_amzn_tls_version_header_name": null,
            "routing_http_response_access_control_allow_credentials_header_value": "",
            "routing_http_response_access_control_allow_headers_header_value": "",
            "routing_http_response_access_control_allow_methods_header_value": "",
            "routing_http_response_access_control_allow_origin_header_value": "",
            "routing_http_response_access_control_expose_headers_header_value": "",
            "routing_http_response_access_control_max_age_header_value": "",
            "routing_http_response_content_security_policy_header_value": "",
            "routing_http_response_server_enabled": true,
            "routing_http_response_strict_transport_security_header_value": "",
            "routing_http_response_x_content_type_options_header_value": "",
            "routing_http_response_x_frame_options_header_value": "",
            "ssl_policy": "",
            "tags": {},
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tcp_idle_timeout_seconds": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsInVwZGF0ZSI6MzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "aws_security_group.alb",
            "module.alb.aws_lb.main",
            "module.alb.aws_lb_target_group.portal",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.alb",
      "mode": "managed",
      "type": "aws_lb_listener",
      "name": "webmethods_direct",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alpn_policy": null,
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/d8a6f63802685d2f",
            "certificate_arn": null,
            "default_action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-webmethods-dev/fccd5bb6cfa6316c",
                "type": "forward"
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/d8a6f63802685d2f",
            "load_balancer_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:loadbalancer/app/apim-alb-dev/6e063017bb17d1dd",
            "mutual_authentication": [],
            "port": 9072,
            "protocol": "HTTP",
            "routing_http_request_x_amzn_mtls_clientcert_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_issuer_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_leaf_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_subject_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_validity_header_name": null,
            "routing_http_request_x_amzn_tls_cipher_suite_header_name": null,
            "routing_http_request_x_amzn_tls_version_header_name": null,
            "routing_http_response_access_control_allow_credentials_header_value": "",
            "routing_http_response_access_control_allow_headers_header_value": "",
            "routing_http_response_access_control_allow_methods_header_value": "",
            "routing_http_response_access_control_allow_origin_header_value": "",
            "routing_http_response_access_control_expose_headers_header_value": "",
            "routing_http_response_access_control_max_age_header_value": "",
            "routing_http_response_content_security_policy_header_value": "",
            "routing_http_response_server_enabled": true,
            "routing_http_response_strict_transport_security_header_value": "",
            "routing_http_response_x_content_type_options_header_value": "",
            "routing_http_response_x_frame_options_header_value": "",
            "ssl_policy": "",
            "tags": {},
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tcp_idle_timeout_seconds": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsInVwZGF0ZSI6MzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "aws_security_group.alb",
            "module.alb.aws_lb.main",
            "module.alb.aws_lb_target_group.webmethods",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.alb",
      "mode": "managed",
      "type": "aws_lb_listener_rule",
      "name": "jenkins_path",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-jenkins-dev/8329841bf62c8244",
                "type": "forward"
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/f604e677cdbb48e2",
            "condition": [
              {
                "host_header": [],
                "http_header": [],
                "http_request_method": [],
                "path_pattern": [
                  {
                    "values": [
                      "/jenkins*"
                    ]
                  }
                ],
                "query_string": [],
                "source_ip": []
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/f604e677cdbb48e2",
            "listener_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a",
            "priority": 300,
            "tags": {},
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_security_group.alb",
            "module.alb.aws_lb.main",
            "module.alb.aws_lb_listener.http",
            "module.alb.aws_lb_target_group.jenkins",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.alb",
      "mode": "managed",
      "type": "aws_lb_listener_rule",
      "name": "portal_path",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-portal-dev/031e92fc28a059ae",
                "type": "forward"
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/16d19bef2b908d16",
            "condition": [
              {
                "host_header": [],
                "http_header": [],
                "http_request_method": [],
                "path_pattern": [
                  {
                    "values": [
                      "/portal*"
                    ]
                  }
                ],
                "query_string": [],
                "source_ip": []
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/16d19bef2b908d16",
            "listener_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a",
            "priority": 200,
            "tags": {},
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_security_group.alb",
            "module.alb.aws_lb.main",
            "module.alb.aws_lb_listener.http",
            "module.alb.aws_lb_target_group.portal",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.alb",
      "mode": "managed",
      "type": "aws_lb_listener_rule",
      "name": "webmethods_path",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-webmethods-dev/fccd5bb6cfa6316c",
                "type": "forward"
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/78c6f331ea7262e0",
            "condition": [
              {
                "host_header": [],
                "http_header": [],
                "http_request_method": [],
                "path_pattern": [
                  {
                    "values": [
                      "/invoke/*",
                      "/rest/*",
                      "/webmethods*"
                    ]
                  }
                ],
                "query_string": [],
                "source_ip": []
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener-rule/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a/78c6f331ea7262e0",
            "listener_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:listener/app/apim-alb-dev/6e063017bb17d1dd/60228e711472e69a",
            "priority": 100,
            "tags": {},
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_security_group.alb",
            "module.alb.aws_lb.main",
            "module.alb.aws_lb_listener.http",
            "module.alb.aws_lb_target_group.webmethods",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.alb",
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "jenkins",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-jenkins-dev/8329841bf62c8244",
            "arn_suffix": "targetgroup/apim-jenkins-dev/8329841bf62c8244",
            "connection_termination": null,
            "deregistration_delay": "30",
            "health_check": [
              {
                "enabled": true,
                "healthy_threshold": 2,
                "interval": 30,
                "matcher": "200",
                "path": "/login",
                "port": "traffic-port",
                "protocol": "HTTP",
                "timeout": 5,
                "unhealthy_threshold": 3
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-jenkins-dev/8329841bf62c8244",
            "ip_address_type": "ipv4",
            "lambda_multi_value_headers_enabled": false,
            "load_balancer_arns": [
              "arn:aws:elasticloadbalancing:eu-west-1:848853684735:loadbalancer/app/apim-alb-dev/6e063017bb17d1dd"
            ],
            "load_balancing_algorithm_type": "round_robin",
            "load_balancing_anomaly_mitigation": "off",
            "load_balancing_cross_zone_enabled": "use_load_balancer_configuration",
            "name": "apim-jenkins-dev",
            "name_prefix": "",
            "port": 8080,
            "preserve_client_ip": null,
            "protocol": "HTTP",
            "protocol_version": "HTTP1",
            "proxy_protocol_v2": false,
            "slow_start": 0,
            "stickiness": [
              {
                "cookie_duration": 86400,
                "cookie_name": "",
                "enabled": false,
                "type": "lb_cookie"
              }
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "jenkins-tg",
              "Project": "APIM",
              "Service": "Jenkins"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "jenkins-tg",
              "Project": "APIM",
              "Service": "Jenkins"
            },
            "target_failover": [
              {
                "on_deregistration": null,
                "on_unhealthy": null
              }
            ],
            "target_group_health": [
              {
                "dns_failover": [
                  {
                    "minimum_healthy_targets_count": "1",
                    "minimum_healthy_targets_percentage": "off"
                  }
                ],
                "unhealthy_state_routing": [
                  {
                    "minimum_healthy_targets_count": 1,
                    "minimum_healthy_targets_percentage": "off"
                  }
                ]
              }
            ],
            "target_health_state": [
              {
                "enable_unhealthy_connection_termination": null,
                "unhealthy_draining_interval": null
              }
            ],
            "target_type": "instance",
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.alb",
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "portal",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-portal-dev/031e92fc28a059ae",
            "arn_suffix": "targetgroup/apim-portal-dev/031e92fc28a059ae",
            "connection_termination": null,
            "deregistration_delay": "30",
            "health_check": [
              {
                "enabled": true,
                "healthy_threshold": 2,
                "interval": 30,
                "matcher": "200,302",
                "path": "/portal",
                "port": "traffic-port",
                "protocol": "HTTP",
                "timeout": 5,
                "unhealthy_threshold": 3
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-portal-dev/031e92fc28a059ae",
            "ip_address_type": "ipv4",
            "lambda_multi_value_headers_enabled": false,
            "load_balancer_arns": [
              "arn:aws:elasticloadbalancing:eu-west-1:848853684735:loadbalancer/app/apim-alb-dev/6e063017bb17d1dd"
            ],
            "load_balancing_algorithm_type": "round_robin",
            "load_balancing_anomaly_mitigation": "off",
            "load_balancing_cross_zone_enabled": "use_load_balancer_configuration",
            "name": "apim-portal-dev",
            "name_prefix": "",
            "port": 18101,
            "preserve_client_ip": null,
            "protocol": "HTTP",
            "protocol_version": "HTTP1",
            "proxy_protocol_v2": false,
            "slow_start": 0,
            "stickiness": [
              {
                "cookie_duration": 86400,
                "cookie_name": "",
                "enabled": false,
                "type": "lb_cookie"
              }
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "portal-tg",
              "Project": "APIM",
              "Service": "Portal"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "portal-tg",
              "Project": "APIM",
              "Service": "Portal"
            },
            "target_failover": [
              {
                "on_deregistration": null,
                "on_unhealthy": null
              }
            ],
            "target_group_health": [
              {
                "dns_failover": [
                  {
                    "minimum_healthy_targets_count": "1",
                    "minimum_healthy_targets_percentage": "off"
                  }
                ],
                "unhealthy_state_routing": [
                  {
                    "minimum_healthy_targets_count": 1,
                    "minimum_healthy_targets_percentage": "off"
                  }
                ]
              }
            ],
            "target_health_state": [
              {
                "enable_unhealthy_connection_termination": null,
                "unhealthy_draining_interval": null
              }
            ],
            "target_type": "instance",
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.alb",
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "webmethods",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-webmethods-dev/fccd5bb6cfa6316c",
            "arn_suffix": "targetgroup/apim-webmethods-dev/fccd5bb6cfa6316c",
            "connection_termination": null,
            "deregistration_delay": "30",
            "health_check": [
              {
                "enabled": true,
                "healthy_threshold": 2,
                "interval": 30,
                "matcher": "200",
                "path": "/rest/apigateway/health",
                "port": "traffic-port",
                "protocol": "HTTP",
                "timeout": 5,
                "unhealthy_threshold": 3
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-webmethods-dev/fccd5bb6cfa6316c",
            "ip_address_type": "ipv4",
            "lambda_multi_value_headers_enabled": false,
            "load_balancer_arns": [
              "arn:aws:elasticloadbalancing:eu-west-1:848853684735:loadbalancer/app/apim-alb-dev/6e063017bb17d1dd"
            ],
            "load_balancing_algorithm_type": "round_robin",
            "load_balancing_anomaly_mitigation": "off",
            "load_balancing_cross_zone_enabled": "use_load_balancer_configuration",
            "name": "apim-webmethods-dev",
            "name_prefix": "",
            "port": 9072,
            "preserve_client_ip": null,
            "protocol": "HTTP",
            "protocol_version": "HTTP1",
            "proxy_protocol_v2": false,
            "slow_start": 0,
            "stickiness": [
              {
                "cookie_duration": 86400,
                "cookie_name": "",
                "enabled": false,
                "type": "lb_cookie"
              }
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "webmethods-tg",
              "Project": "APIM",
              "Service": "webMethods"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "webmethods-tg",
              "Project": "APIM",
              "Service": "webMethods"
            },
            "target_failover": [
              {
                "on_deregistration": null,
                "on_unhealthy": null
              }
            ],
            "target_group_health": [
              {
                "dns_failover": [
                  {
                    "minimum_healthy_targets_count": "1",
                    "minimum_healthy_targets_percentage": "off"
                  }
                ],
                "unhealthy_state_routing": [
                  {
                    "minimum_healthy_targets_count": 1,
                    "minimum_healthy_targets_percentage": "off"
                  }
                ]
              }
            ],
            "target_health_state": [
              {
                "enable_unhealthy_connection_termination": null,
                "unhealthy_draining_interval": null
              }
            ],
            "target_type": "instance",
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.alb",
      "mode": "managed",
      "type": "aws_lb_target_group_attachment",
      "name": "jenkins",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_zone": null,
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-jenkins-dev/8329841bf62c8244-20251219131513872800000002",
            "port": 8080,
            "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-jenkins-dev/8329841bf62c8244",
            "target_id": "i-0550290687f536536"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_security_group.alb",
            "aws_security_group.jenkins",
            "module.alb.aws_lb_target_group.jenkins",
            "module.ec2.aws_instance.jenkins",
            "module.ec2.data.aws_ami.amazon_linux_2",
            "module.iam.aws_iam_instance_profile.jenkins",
            "module.iam.aws_iam_role.jenkins",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.alb",
      "mode": "managed",
      "type": "aws_lb_target_group_attachment",
      "name": "portal",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_zone": null,
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-portal-dev/031e92fc28a059ae-20251219131514076200000006",
            "port": 18101,
            "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-portal-dev/031e92fc28a059ae",
            "target_id": "i-04fb38556aa3eaaff"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.artifacts",
            "aws_security_group.alb",
            "aws_security_group.portal",
            "aws_security_group.webmethods",
            "module.alb.aws_lb_target_group.portal",
            "module.ec2.aws_instance.portal",
            "module.ec2.aws_instance.webmethods",
            "module.ec2.data.aws_ami.amazon_linux_2",
            "module.iam.aws_iam_instance_profile.portal",
            "module.iam.aws_iam_instance_profile.webmethods",
            "module.iam.aws_iam_role.portal",
            "module.iam.aws_iam_role.webmethods",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.alb",
      "mode": "managed",
      "type": "aws_lb_target_group_attachment",
      "name": "webmethods",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_zone": null,
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-webmethods-dev/fccd5bb6cfa6316c-20251219131513716100000001",
            "port": 9072,
            "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-webmethods-dev/fccd5bb6cfa6316c",
            "target_id": "i-0751d8af1a3707973"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.artifacts",
            "aws_security_group.alb",
            "aws_security_group.webmethods",
            "module.alb.aws_lb_target_group.webmethods",
            "module.ec2.aws_instance.webmethods",
            "module.ec2.data.aws_ami.amazon_linux_2",
            "module.iam.aws_iam_instance_profile.webmethods",
            "module.iam.aws_iam_role.webmethods",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ec2",
      "mode": "data",
      "type": "aws_ami",
      "name": "amazon_linux_2",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architecture": "x86_64",
            "arn": "arn:aws:ec2:eu-west-1::image/ami-07fbc2dd99a4a9fe7",
            "block_device_mappings": [
              {
                "device_name": "/dev/xvda",
                "ebs": {
                  "delete_on_termination": "true",
                  "encrypted": "false",
                  "iops": "0",
                  "snapshot_id": "snap-079386c30c432c69e",
                  "throughput": "0",
                  "volume_initialization_rate": "0",
                  "volume_size": "8",
                  "volume_type": "gp2"
                },
                "no_device": "",
                "virtual_name": ""
              }
            ],
            "boot_mode": "",
            "creation_date": "2025-12-03T22:53:41.000Z",
            "deprecation_time": "2026-03-03T00:00:00.000Z",
            "description": "Amazon Linux 2 AMI 2.0.20251208.0 x86_64 HVM gp2",
            "ena_support": true,
            "executable_users": null,
            "filter": [
              {
                "name": "name",
                "values": [
                  "amzn2-ami-hvm-*-x86_64-gp2"
                ]
              },
              {
                "name": "virtualization-type",
                "values": [
                  "hvm"
                ]
              }
            ],
            "hypervisor": "xen",
            "id": "ami-07fbc2dd99a4a9fe7",
            "image_id": "ami-07fbc2dd99a4a9fe7",
            "image_location": "amazon/amzn2-ami-hvm-2.0.20251208.0-x86_64-gp2",
            "image_owner_alias": "amazon",
            "image_type": "machine",
            "imds_support": "",
            "include_deprecated": false,
            "kernel_id": "",
            "last_launched_time": "",
            "most_recent": true,
            "name": "amzn2-ami-hvm-2.0.20251208.0-x86_64-gp2",
            "name_regex": null,
            "owner_id": "137112412989",
            "owners": [
              "amazon"
            ],
            "platform": "",
            "platform_details": "Linux/UNIX",
            "product_codes": [],
            "public": true,
            "ramdisk_id": "",
            "root_device_name": "/dev/xvda",
            "root_device_type": "ebs",
            "root_snapshot_id": "snap-079386c30c432c69e",
            "sriov_net_support": "simple",
            "state": "available",
            "state_reason": {
              "code": "UNSET",
              "message": "UNSET"
            },
            "tags": {},
            "timeouts": null,
            "tpm_support": "",
            "uefi_data": null,
            "usage_operation": "RunInstances",
            "virtualization_type": "hvm"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.ec2",
      "mode": "managed",
      "type": "aws_instance",
      "name": "jenkins",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-07fbc2dd99a4a9fe7",
            "arn": "arn:aws:ec2:eu-west-1:848853684735:instance/i-0550290687f536536",
            "associate_public_ip_address": false,
            "availability_zone": "eu-west-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 2
              }
            ],
            "cpu_threads_per_core": 2,
            "credit_specification": [
              {
                "cpu_credits": "unlimited"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enable_primary_ipv6": null,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "apim-jenkins-profile-dev",
            "id": "i-0550290687f536536",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_lifecycle": "",
            "instance_market_options": [],
            "instance_state": "running",
            "instance_type": "t3.medium",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": 0,
            "primary_network_interface_id": "eni-034e1564a308b7daa",
            "private_dns": "ip-10-0-10-104.eu-west-1.compute.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.10.104",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": true,
                "iops": 3000,
                "kms_key_id": "arn:aws:kms:eu-west-1:848853684735:key/130cfc53-77fc-4326-8ef7-3877b6fd8867",
                "tags": {},
                "tags_all": {
                  "Environment": "dev",
                  "ManagedBy": "Terraform",
                  "Project": "APIM"
                },
                "throughput": 125,
                "volume_id": "vol-0c93ff33599d8432b",
                "volume_size": 30,
                "volume_type": "gp3"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "spot_instance_request_id": "",
            "subnet_id": "subnet-0ccaad7473290c6cb",
            "tags": {
              "AutoStop": "true",
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-jenkins-dev",
              "Project": "APIM",
              "Service": "Jenkins"
            },
            "tags_all": {
              "AutoStop": "true",
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-jenkins-dev",
              "Project": "APIM",
              "Service": "Jenkins"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "9533eb4b9547536f34dc19bd54464c22dd9979fb",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-0a4c1e066c53d7083"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwicmVhZCI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "aws_security_group.alb",
            "aws_security_group.jenkins",
            "module.ec2.data.aws_ami.amazon_linux_2",
            "module.iam.aws_iam_instance_profile.jenkins",
            "module.iam.aws_iam_role.jenkins",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ec2",
      "mode": "managed",
      "type": "aws_instance",
      "name": "portal",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-07fbc2dd99a4a9fe7",
            "arn": "arn:aws:ec2:eu-west-1:848853684735:instance/i-04fb38556aa3eaaff",
            "associate_public_ip_address": false,
            "availability_zone": "eu-west-1b",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 2
              }
            ],
            "cpu_threads_per_core": 2,
            "credit_specification": [
              {
                "cpu_credits": "unlimited"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enable_primary_ipv6": null,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "apim-portal-profile-dev",
            "id": "i-04fb38556aa3eaaff",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_lifecycle": "",
            "instance_market_options": [],
            "instance_state": "running",
            "instance_type": "t3.medium",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": 0,
            "primary_network_interface_id": "eni-0e49272139e128c31",
            "private_dns": "ip-10-0-11-24.eu-west-1.compute.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.11.24",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": true,
                "iops": 3000,
                "kms_key_id": "arn:aws:kms:eu-west-1:848853684735:key/130cfc53-77fc-4326-8ef7-3877b6fd8867",
                "tags": {},
                "tags_all": {
                  "Environment": "dev",
                  "ManagedBy": "Terraform",
                  "Project": "APIM"
                },
                "throughput": 125,
                "volume_id": "vol-008f94fb2a09e5448",
                "volume_size": 30,
                "volume_type": "gp3"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "spot_instance_request_id": "",
            "subnet_id": "subnet-020d367b03dfaa70b",
            "tags": {
              "AutoStop": "true",
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-portal-dev",
              "Project": "APIM",
              "Service": "Portal"
            },
            "tags_all": {
              "AutoStop": "true",
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-portal-dev",
              "Project": "APIM",
              "Service": "Portal"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "7c41a55c6c1e839d0f99731b214ef8199ad93e64",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-07ce6a398e72afa26"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwicmVhZCI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "aws_s3_bucket.artifacts",
            "aws_security_group.alb",
            "aws_security_group.portal",
            "aws_security_group.webmethods",
            "module.ec2.aws_instance.webmethods",
            "module.ec2.data.aws_ami.amazon_linux_2",
            "module.iam.aws_iam_instance_profile.portal",
            "module.iam.aws_iam_instance_profile.webmethods",
            "module.iam.aws_iam_role.portal",
            "module.iam.aws_iam_role.webmethods",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ec2",
      "mode": "managed",
      "type": "aws_instance",
      "name": "vault",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-07fbc2dd99a4a9fe7",
            "arn": "arn:aws:ec2:eu-west-1:848853684735:instance/i-03734c803fb863ad6",
            "associate_public_ip_address": false,
            "availability_zone": "eu-west-1b",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 2
              }
            ],
            "cpu_threads_per_core": 2,
            "credit_specification": [
              {
                "cpu_credits": "unlimited"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enable_primary_ipv6": null,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "apim-vault-profile-dev",
            "id": "i-03734c803fb863ad6",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_lifecycle": "",
            "instance_market_options": [],
            "instance_state": "running",
            "instance_type": "t3.small",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": 0,
            "primary_network_interface_id": "eni-0a514a52a20afff1d",
            "private_dns": "ip-10-0-11-233.eu-west-1.compute.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.11.233",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": true,
                "iops": 3000,
                "kms_key_id": "arn:aws:kms:eu-west-1:848853684735:key/130cfc53-77fc-4326-8ef7-3877b6fd8867",
                "tags": {},
                "tags_all": {
                  "Environment": "dev",
                  "ManagedBy": "Terraform",
                  "Project": "APIM"
                },
                "throughput": 125,
                "volume_id": "vol-0da7e30cd43dbf02e",
                "volume_size": 20,
                "volume_type": "gp3"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "spot_instance_request_id": "",
            "subnet_id": "subnet-020d367b03dfaa70b",
            "tags": {
              "AutoStop": "false",
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-vault-dev",
              "Project": "APIM",
              "Service": "Vault"
            },
            "tags_all": {
              "AutoStop": "false",
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-vault-dev",
              "Project": "APIM",
              "Service": "Vault"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "cc98318f50bbd5543241a0ba1edbfe2f85c4de6d",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-09bed30be668370ba"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwicmVhZCI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "aws_kms_key.vault",
            "aws_s3_bucket.vault_storage",
            "aws_security_group.vault",
            "module.ec2.data.aws_ami.amazon_linux_2",
            "module.iam.aws_iam_instance_profile.vault",
            "module.iam.aws_iam_role.vault",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ec2",
      "mode": "managed",
      "type": "aws_instance",
      "name": "webmethods",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-07fbc2dd99a4a9fe7",
            "arn": "arn:aws:ec2:eu-west-1:848853684735:instance/i-0751d8af1a3707973",
            "associate_public_ip_address": false,
            "availability_zone": "eu-west-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 2
              }
            ],
            "cpu_threads_per_core": 2,
            "credit_specification": [
              {
                "cpu_credits": "unlimited"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enable_primary_ipv6": null,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "apim-webmethods-profile-dev",
            "id": "i-0751d8af1a3707973",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_lifecycle": "",
            "instance_market_options": [],
            "instance_state": "running",
            "instance_type": "t3.large",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": 0,
            "primary_network_interface_id": "eni-0630e21bdd6abd261",
            "private_dns": "ip-10-0-10-87.eu-west-1.compute.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.10.87",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": true,
                "iops": 3000,
                "kms_key_id": "arn:aws:kms:eu-west-1:848853684735:key/130cfc53-77fc-4326-8ef7-3877b6fd8867",
                "tags": {},
                "tags_all": {
                  "Environment": "dev",
                  "ManagedBy": "Terraform",
                  "Project": "APIM"
                },
                "throughput": 125,
                "volume_id": "vol-046b9f22b15157426",
                "volume_size": 50,
                "volume_type": "gp3"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "spot_instance_request_id": "",
            "subnet_id": "subnet-0ccaad7473290c6cb",
            "tags": {
              "AutoStop": "true",
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-webmethods-dev",
              "Project": "APIM",
              "Service": "webMethods"
            },
            "tags_all": {
              "AutoStop": "true",
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-webmethods-dev",
              "Project": "APIM",
              "Service": "webMethods"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "7874f113f79affabeea928cb528a1800edb1710d",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-04ab3e8c7501869c7"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwicmVhZCI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "aws_s3_bucket.artifacts",
            "aws_security_group.alb",
            "aws_security_group.webmethods",
            "module.ec2.data.aws_ami.amazon_linux_2",
            "module.iam.aws_iam_instance_profile.webmethods",
            "module.iam.aws_iam_role.webmethods",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_instance_profile",
      "name": "jenkins",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:instance-profile/apim-jenkins-profile-dev",
            "create_date": "2025-12-17T09:06:30Z",
            "id": "apim-jenkins-profile-dev",
            "name": "apim-jenkins-profile-dev",
            "name_prefix": "",
            "path": "/",
            "role": "apim-jenkins-role-dev",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "unique_id": "AIPA4LI47KH75MEN2ABUO"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.jenkins"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_instance_profile",
      "name": "portal",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:instance-profile/apim-portal-profile-dev",
            "create_date": "2025-12-17T09:06:28Z",
            "id": "apim-portal-profile-dev",
            "name": "apim-portal-profile-dev",
            "name_prefix": "",
            "path": "/",
            "role": "apim-portal-role-dev",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "unique_id": "AIPA4LI47KH7WYGJRL35V"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.portal"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_instance_profile",
      "name": "vault",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:instance-profile/apim-vault-profile-dev",
            "create_date": "2025-12-17T09:06:28Z",
            "id": "apim-vault-profile-dev",
            "name": "apim-vault-profile-dev",
            "name_prefix": "",
            "path": "/",
            "role": "apim-vault-role-dev",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "unique_id": "AIPA4LI47KH7U6VSTOI4T"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.vault"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_instance_profile",
      "name": "webmethods",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:instance-profile/apim-webmethods-profile-dev",
            "create_date": "2025-12-17T09:06:29Z",
            "id": "apim-webmethods-profile-dev",
            "name": "apim-webmethods-profile-dev",
            "name_prefix": "",
            "path": "/",
            "role": "apim-webmethods-role-dev",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "unique_id": "AIPA4LI47KH7T7D7AFR4C"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.webmethods"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "cloudwatch_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:policy/apim-cloudwatch-logs-dev",
            "attachment_count": 4,
            "description": "Allow writing to CloudWatch Logs",
            "id": "arn:aws:iam::848853684735:policy/apim-cloudwatch-logs-dev",
            "name": "apim-cloudwatch-logs-dev",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\",\"logs:DescribeLogStreams\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPA4LI47KH7UMBKHNWLZ",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "jenkins_admin",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:policy/apim-jenkins-admin-dev",
            "attachment_count": 1,
            "description": "Allow Jenkins to manage AWS resources",
            "id": "arn:aws:iam::848853684735:policy/apim-jenkins-admin-dev",
            "name": "apim-jenkins-admin-dev",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"ec2:*\",\"ecs:*\",\"ecr:*\",\"s3:*\",\"dynamodb:*\",\"iam:PassRole\",\"iam:GetRole\",\"iam:ListRoles\",\"logs:*\",\"cloudwatch:*\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPA4LI47KH7UUW2YA7UU",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "s3_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:policy/apim-s3-access-dev",
            "attachment_count": 2,
            "description": "Allow S3 access for artifacts and backups",
            "id": "arn:aws:iam::848853684735:policy/apim-s3-access-dev",
            "name": "apim-s3-access-dev",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"s3:ListBucket\",\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::apim-*-dev\",\"arn:aws:s3:::apim-*-dev/*\"]}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPA4LI47KH7SMJDWS3VA",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "ssm_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:policy/apim-ssm-access-dev",
            "attachment_count": 4,
            "description": "Allow SSM Session Manager access",
            "id": "arn:aws:iam::848853684735:policy/apim-ssm-access-dev",
            "name": "apim-ssm-access-dev",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"ssm:UpdateInstanceInformation\",\"ssmmessages:CreateControlChannel\",\"ssmmessages:CreateDataChannel\",\"ssmmessages:OpenControlChannel\",\"ssmmessages:OpenDataChannel\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"s3:GetEncryptionConfiguration\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPA4LI47KH73NRQVOWRH",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "vault_s3_kms",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:policy/apim-vault-s3-kms-dev",
            "attachment_count": 1,
            "description": "Allow Vault S3 backend and KMS auto-unseal",
            "id": "arn:aws:iam::848853684735:policy/apim-vault-s3-kms-dev",
            "name": "apim-vault-s3-kms-dev",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"s3:PutObject\",\"s3:GetObject\",\"s3:DeleteObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::apim-vault-storage-dev\",\"arn:aws:s3:::apim-vault-storage-dev/*\"]},{\"Action\":[\"kms:Encrypt\",\"kms:Decrypt\",\"kms:DescribeKey\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPA4LI47KH7Q6IFWJ37F",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "jenkins",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:role/apim-jenkins-role-dev",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-12-17T10:02:46Z",
            "description": "",
            "force_detach_policies": false,
            "id": "apim-jenkins-role-dev",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::848853684735:policy/apim-cloudwatch-logs-dev",
              "arn:aws:iam::848853684735:policy/apim-ecr-access-dev",
              "arn:aws:iam::848853684735:policy/apim-jenkins-admin-dev",
              "arn:aws:iam::848853684735:policy/apim-s3-access-dev",
              "arn:aws:iam::848853684735:policy/apim-ssm-access-dev"
            ],
            "max_session_duration": 3600,
            "name": "apim-jenkins-role-dev",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "unique_id": "AROA4LI47KH73OZAB67AK"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "portal",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:role/apim-portal-role-dev",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-12-17T10:02:45Z",
            "description": "",
            "force_detach_policies": false,
            "id": "apim-portal-role-dev",
            "inline_policy": [
              {
                "name": "ECRFullAccess",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecr:GetAuthorizationToken\",\"ecr:BatchCheckLayerAvailability\",\"ecr:GetDownloadUrlForLayer\",\"ecr:GetRepositoryPolicy\",\"ecr:DescribeRepositories\",\"ecr:ListImages\",\"ecr:DescribeImages\",\"ecr:BatchGetImage\",\"ecr:InitiateLayerUpload\",\"ecr:UploadLayerPart\",\"ecr:CompleteLayerUpload\",\"ecr:PutImage\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              }
            ],
            "managed_policy_arns": [
              "arn:aws:iam::848853684735:policy/apim-cloudwatch-logs-dev",
              "arn:aws:iam::848853684735:policy/apim-ecr-access-dev",
              "arn:aws:iam::848853684735:policy/apim-ssm-access-dev"
            ],
            "max_session_duration": 3600,
            "name": "apim-portal-role-dev",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "unique_id": "AROA4LI47KH76IA2E76PY"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "vault",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:role/apim-vault-role-dev",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-12-17T10:02:45Z",
            "description": "",
            "force_detach_policies": false,
            "id": "apim-vault-role-dev",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::848853684735:policy/apim-cloudwatch-logs-dev",
              "arn:aws:iam::848853684735:policy/apim-ecr-access-dev",
              "arn:aws:iam::848853684735:policy/apim-ssm-access-dev",
              "arn:aws:iam::848853684735:policy/apim-vault-s3-kms-dev"
            ],
            "max_session_duration": 3600,
            "name": "apim-vault-role-dev",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "unique_id": "AROA4LI47KH7WRQGUUMFV"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "webmethods",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:role/apim-webmethods-role-dev",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-12-17T10:02:45Z",
            "description": "",
            "force_detach_policies": false,
            "id": "apim-webmethods-role-dev",
            "inline_policy": [
              {
                "name": "ECRFullAccess",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecr:GetAuthorizationToken\",\"ecr:BatchCheckLayerAvailability\",\"ecr:GetDownloadUrlForLayer\",\"ecr:GetRepositoryPolicy\",\"ecr:DescribeRepositories\",\"ecr:ListImages\",\"ecr:DescribeImages\",\"ecr:BatchGetImage\",\"ecr:InitiateLayerUpload\",\"ecr:UploadLayerPart\",\"ecr:CompleteLayerUpload\",\"ecr:PutImage\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              }
            ],
            "managed_policy_arns": [
              "arn:aws:iam::848853684735:policy/apim-cloudwatch-logs-dev",
              "arn:aws:iam::848853684735:policy/apim-ecr-access-dev",
              "arn:aws:iam::848853684735:policy/apim-s3-access-dev",
              "arn:aws:iam::848853684735:policy/apim-ssm-access-dev"
            ],
            "max_session_duration": 3600,
            "name": "apim-webmethods-role-dev",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "unique_id": "AROA4LI47KH764IQQNTNE"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "jenkins_admin",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "apim-jenkins-role-dev-arn:aws:iam::848853684735:policy/apim-jenkins-admin-dev",
            "policy_arn": "arn:aws:iam::848853684735:policy/apim-jenkins-admin-dev",
            "role": "apim-jenkins-role-dev"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "module.iam.aws_iam_policy.jenkins_admin",
            "module.iam.aws_iam_role.jenkins"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "jenkins_cloudwatch",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "apim-jenkins-role-dev-arn:aws:iam::848853684735:policy/apim-cloudwatch-logs-dev",
            "policy_arn": "arn:aws:iam::848853684735:policy/apim-cloudwatch-logs-dev",
            "role": "apim-jenkins-role-dev"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "module.iam.aws_iam_policy.cloudwatch_logs",
            "module.iam.aws_iam_role.jenkins"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "jenkins_s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "apim-jenkins-role-dev-arn:aws:iam::848853684735:policy/apim-s3-access-dev",
            "policy_arn": "arn:aws:iam::848853684735:policy/apim-s3-access-dev",
            "role": "apim-jenkins-role-dev"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "module.iam.aws_iam_policy.s3_access",
            "module.iam.aws_iam_role.jenkins"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "jenkins_ssm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "apim-jenkins-role-dev-arn:aws:iam::848853684735:policy/apim-ssm-access-dev",
            "policy_arn": "arn:aws:iam::848853684735:policy/apim-ssm-access-dev",
            "role": "apim-jenkins-role-dev"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "module.iam.aws_iam_policy.ssm_access",
            "module.iam.aws_iam_role.jenkins"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "portal_cloudwatch",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "apim-portal-role-dev-arn:aws:iam::848853684735:policy/apim-cloudwatch-logs-dev",
            "policy_arn": "arn:aws:iam::848853684735:policy/apim-cloudwatch-logs-dev",
            "role": "apim-portal-role-dev"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "module.iam.aws_iam_policy.cloudwatch_logs",
            "module.iam.aws_iam_role.portal"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "portal_ssm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "apim-portal-role-dev-arn:aws:iam::848853684735:policy/apim-ssm-access-dev",
            "policy_arn": "arn:aws:iam::848853684735:policy/apim-ssm-access-dev",
            "role": "apim-portal-role-dev"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "module.iam.aws_iam_policy.ssm_access",
            "module.iam.aws_iam_role.portal"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "vault_cloudwatch",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "apim-vault-role-dev-arn:aws:iam::848853684735:policy/apim-cloudwatch-logs-dev",
            "policy_arn": "arn:aws:iam::848853684735:policy/apim-cloudwatch-logs-dev",
            "role": "apim-vault-role-dev"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "module.iam.aws_iam_policy.cloudwatch_logs",
            "module.iam.aws_iam_role.vault"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "vault_s3_kms",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "apim-vault-role-dev-arn:aws:iam::848853684735:policy/apim-vault-s3-kms-dev",
            "policy_arn": "arn:aws:iam::848853684735:policy/apim-vault-s3-kms-dev",
            "role": "apim-vault-role-dev"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "module.iam.aws_iam_policy.vault_s3_kms",
            "module.iam.aws_iam_role.vault"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "vault_ssm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "apim-vault-role-dev-arn:aws:iam::848853684735:policy/apim-ssm-access-dev",
            "policy_arn": "arn:aws:iam::848853684735:policy/apim-ssm-access-dev",
            "role": "apim-vault-role-dev"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "module.iam.aws_iam_policy.ssm_access",
            "module.iam.aws_iam_role.vault"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "webmethods_cloudwatch",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "apim-webmethods-role-dev-arn:aws:iam::848853684735:policy/apim-cloudwatch-logs-dev",
            "policy_arn": "arn:aws:iam::848853684735:policy/apim-cloudwatch-logs-dev",
            "role": "apim-webmethods-role-dev"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "module.iam.aws_iam_policy.cloudwatch_logs",
            "module.iam.aws_iam_role.webmethods"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "webmethods_s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "apim-webmethods-role-dev-arn:aws:iam::848853684735:policy/apim-s3-access-dev",
            "policy_arn": "arn:aws:iam::848853684735:policy/apim-s3-access-dev",
            "role": "apim-webmethods-role-dev"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "module.iam.aws_iam_policy.s3_access",
            "module.iam.aws_iam_role.webmethods"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "webmethods_ssm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "apim-webmethods-role-dev-arn:aws:iam::848853684735:policy/apim-ssm-access-dev",
            "policy_arn": "arn:aws:iam::848853684735:policy/apim-ssm-access-dev",
            "role": "apim-webmethods-role-dev"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "module.iam.aws_iam_policy.ssm_access",
            "module.iam.aws_iam_role.webmethods"
          ]
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "data",
      "type": "archive_file",
      "name": "idle_shutdown_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "a48d1f24cc5ec21663f88ad93d07ac0ccff7031b",
            "output_base64sha256": "vkLE5WJegblqfMTWQo/sm/9J4yl954CCKvRKRj1ClAI=",
            "output_base64sha512": "5XRrVjabcpMWQdnUqGH8R1hdRURQjUxfXLx1cnYu3QWWZx1WcDH7kolc+Vc8Jg7viDLHmL4rB8c3sXaq6q+8Ig==",
            "output_file_mode": null,
            "output_md5": "349047c7ee88eee7a5919275ec1dad56",
            "output_path": "../../modules/k3s-cluster/lambda/idle_shutdown.zip",
            "output_sha": "a48d1f24cc5ec21663f88ad93d07ac0ccff7031b",
            "output_sha256": "be42c4e5625e81b96a7cc4d6428fec9bff49e3297de780822af44a463d429402",
            "output_sha512": "e5746b56369b72931641d9d4a861fc47585d4544508d4c5f5cbc7572762edd0596671d567031fb92895cf9573c260eef8832c798be2b07c737b176aaeaafbc22",
            "output_size": 1390,
            "source": [
              {
                "content": "import boto3\nimport os\nimport json\nfrom datetime import datetime, timedelta\n\nec2 = boto3.client('ec2')\ncloudwatch = boto3.client('cloudwatch')\nsns = boto3.client('sns')\n\ndef handler(event, context):\n    instance_id = os.environ['INSTANCE_ID']\n    environment = os.environ['ENVIRONMENT']\n    idle_minutes = int(os.environ['IDLE_MINUTES'])\n    cpu_threshold = float(os.environ['CPU_THRESHOLD'])\n    sns_topic = os.environ['SNS_TOPIC_ARN']\n\n    print(f\"Checking idle status for K3s instance {instance_id}\")\n    print(f\"Idle threshold: CPU \u003c {cpu_threshold}% for {idle_minutes} minutes\")\n\n    # VÃ©rifier si l'instance est running\n    response = ec2.describe_instances(InstanceIds=[instance_id])\n    state = response['Reservations'][0]['Instances'][0]['State']['Name']\n\n    if state != 'running':\n        print(f\"Instance is {state}, skipping check\")\n        return {'statusCode': 200, 'body': f'Instance is {state}'}\n\n    # RÃ©cupÃ©rer les mÃ©triques CPU des X derniÃ¨res minutes\n    end_time = datetime.utcnow()\n    start_time = end_time - timedelta(minutes=idle_minutes)\n\n    metrics = cloudwatch.get_metric_statistics(\n        Namespace='AWS/EC2',\n        MetricName='CPUUtilization',\n        Dimensions=[{'Name': 'InstanceId', 'Value': instance_id}],\n        StartTime=start_time,\n        EndTime=end_time,\n        Period=300,  # 5 minutes\n        Statistics=['Average']\n    )\n\n    datapoints = metrics.get('Datapoints', [])\n\n    if not datapoints:\n        print(\"No CPU metrics available yet\")\n        return {'statusCode': 200, 'body': 'No metrics available'}\n\n    # Calculer la moyenne CPU\n    avg_cpu = sum(dp['Average'] for dp in datapoints) / len(datapoints)\n    print(f\"Average CPU over last {idle_minutes} minutes: {avg_cpu:.2f}%\")\n\n    # VÃ©rifier si toutes les mesures sont sous le seuil\n    all_idle = all(dp['Average'] \u003c cpu_threshold for dp in datapoints)\n\n    if all_idle and len(datapoints) \u003e= (idle_minutes // 5):\n        print(f\"Instance is idle (CPU \u003c {cpu_threshold}% for {idle_minutes}+ minutes)\")\n        print(\"Stopping instance...\")\n\n        # ArrÃªter l'instance\n        ec2.stop_instances(InstanceIds=[instance_id])\n\n        # Envoyer notification\n        message = f\"\"\"\nK3s Cluster Auto-Shutdown ({environment})\n\nL'instance K3s a Ã©tÃ© arrÃªtÃ©e automatiquement aprÃ¨s {idle_minutes} minutes d'inactivitÃ©.\n\nInstance ID: {instance_id}\nCPU moyenne: {avg_cpu:.2f}%\nSeuil: {cpu_threshold}%\n\nPour redÃ©marrer:\n  aws ec2 start-instances --instance-ids {instance_id}\n\nOu via le script:\n  ./scripts/start-k3s.sh {environment}\n\"\"\"\n        sns.publish(\n            TopicArn=sns_topic,\n            Subject=f\"[APIM] K3s arrÃªtÃ© - {environment}\",\n            Message=message\n        )\n\n        return {\n            'statusCode': 200,\n            'body': json.dumps({\n                'action': 'stopped',\n                'avg_cpu': avg_cpu,\n                'idle_minutes': idle_minutes\n            })\n        }\n    else:\n        print(f\"Instance is active (CPU: {avg_cpu:.2f}%)\")\n        return {\n            'statusCode': 200,\n            'body': json.dumps({\n                'action': 'running',\n                'avg_cpu': avg_cpu\n            })\n        }\n",
                "filename": "index.py"
              }
            ],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "data",
      "type": "aws_ami",
      "name": "ubuntu",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architecture": "x86_64",
            "arn": "arn:aws:ec2:eu-west-1::image/ami-0f27749973e2399b6",
            "block_device_mappings": [
              {
                "device_name": "/dev/sda1",
                "ebs": {
                  "delete_on_termination": "true",
                  "encrypted": "false",
                  "iops": "0",
                  "snapshot_id": "snap-0ab7d1be54ced206f",
                  "throughput": "0",
                  "volume_initialization_rate": "0",
                  "volume_size": "8",
                  "volume_type": "gp2"
                },
                "no_device": "",
                "virtual_name": ""
              },
              {
                "device_name": "/dev/sdb",
                "ebs": {},
                "no_device": "",
                "virtual_name": "ephemeral0"
              },
              {
                "device_name": "/dev/sdc",
                "ebs": {},
                "no_device": "",
                "virtual_name": "ephemeral1"
              }
            ],
            "boot_mode": "uefi-preferred",
            "creation_date": "2025-12-12T06:54:16.000Z",
            "deprecation_time": "2027-12-12T06:54:16.000Z",
            "description": "Canonical, Ubuntu, 22.04, amd64 jammy image",
            "ena_support": true,
            "executable_users": null,
            "filter": [
              {
                "name": "name",
                "values": [
                  "ubuntu/images/hvm-ssd/ubuntu-jammy-22.04-amd64-server-*"
                ]
              },
              {
                "name": "virtualization-type",
                "values": [
                  "hvm"
                ]
              }
            ],
            "hypervisor": "xen",
            "id": "ami-0f27749973e2399b6",
            "image_id": "ami-0f27749973e2399b6",
            "image_location": "amazon/ubuntu/images/hvm-ssd/ubuntu-jammy-22.04-amd64-server-20251212",
            "image_owner_alias": "amazon",
            "image_type": "machine",
            "imds_support": "",
            "include_deprecated": false,
            "kernel_id": "",
            "last_launched_time": "",
            "most_recent": true,
            "name": "ubuntu/images/hvm-ssd/ubuntu-jammy-22.04-amd64-server-20251212",
            "name_regex": null,
            "owner_id": "099720109477",
            "owners": [
              "099720109477"
            ],
            "platform": "",
            "platform_details": "Linux/UNIX",
            "product_codes": [],
            "public": true,
            "ramdisk_id": "",
            "root_device_name": "/dev/sda1",
            "root_device_type": "ebs",
            "root_snapshot_id": "snap-0ab7d1be54ced206f",
            "sriov_net_support": "simple",
            "state": "available",
            "state_reason": {
              "code": "UNSET",
              "message": "UNSET"
            },
            "tags": {},
            "timeouts": null,
            "tpm_support": "",
            "uefi_data": null,
            "usage_operation": "RunInstances",
            "virtualization_type": "hvm"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "data",
      "type": "aws_availability_zones",
      "name": "available",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "all_availability_zones": null,
            "exclude_names": null,
            "exclude_zone_ids": null,
            "filter": null,
            "group_names": [
              "eu-west-1-zg-1"
            ],
            "id": "eu-west-1",
            "names": [
              "eu-west-1a",
              "eu-west-1b",
              "eu-west-1c"
            ],
            "state": "available",
            "timeouts": null,
            "zone_ids": [
              "euw1-az3",
              "euw1-az1",
              "euw1-az2"
            ]
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_cloudwatch_event_rule",
      "name": "idle_check",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:events:eu-west-1:848853684735:rule/k3s-idle-check-dev",
            "description": "Check K3s idle status every 10 minutes",
            "event_bus_name": "default",
            "event_pattern": null,
            "force_destroy": false,
            "id": "k3s-idle-check-dev",
            "is_enabled": true,
            "name": "k3s-idle-check-dev",
            "name_prefix": "",
            "role_arn": "",
            "schedule_expression": "rate(10 minutes)",
            "state": "ENABLED",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_cloudwatch_event_target",
      "name": "idle_check",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "appsync_target": [],
            "arn": "arn:aws:lambda:eu-west-1:848853684735:function:k3s-idle-shutdown-dev",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "force_destroy": false,
            "http_target": [],
            "id": "k3s-idle-check-dev-k3s-idle-check",
            "input": "",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "",
            "rule": "k3s-idle-check-dev",
            "run_command_targets": [],
            "sagemaker_pipeline_target": [],
            "sqs_target": [],
            "target_id": "k3s-idle-check"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "aws_security_group.alb",
            "data.aws_caller_identity.current",
            "module.alb.aws_lb.main",
            "module.ec2.aws_instance.portal",
            "module.ec2.aws_instance.webmethods",
            "module.k3s.aws_cloudwatch_event_rule.idle_check",
            "module.k3s.aws_iam_instance_profile.k3s",
            "module.k3s.aws_iam_role.idle_shutdown_lambda",
            "module.k3s.aws_iam_role.k3s",
            "module.k3s.aws_instance.k3s_server",
            "module.k3s.aws_lambda_function.idle_shutdown",
            "module.k3s.aws_security_group.k3s",
            "module.k3s.aws_sns_topic.idle_notifications",
            "module.k3s.data.archive_file.idle_shutdown_lambda",
            "module.k3s.data.aws_ami.ubuntu",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "idle_shutdown_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:eu-west-1:848853684735:log-group:/aws/lambda/k3s-idle-shutdown-dev",
            "id": "/aws/lambda/k3s-idle-shutdown-dev",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/aws/lambda/k3s-idle-shutdown-dev",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "k3s",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:eu-west-1:848853684735:log-group:/apim/k3s/dev",
            "id": "/apim/k3s/dev",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/apim/k3s/dev",
            "name_prefix": "",
            "retention_in_days": 30,
            "skip_destroy": false,
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_ebs_volume",
      "name": "k3s_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:volume/vol-053595d2c53fcc646",
            "availability_zone": "eu-west-1a",
            "create_time": "2025-12-19T14:03:40Z",
            "encrypted": true,
            "final_snapshot": false,
            "id": "vol-053595d2c53fcc646",
            "iops": 3000,
            "kms_key_id": "arn:aws:kms:eu-west-1:848853684735:key/130cfc53-77fc-4326-8ef7-3877b6fd8867",
            "multi_attach_enabled": false,
            "outpost_arn": "",
            "size": 100,
            "snapshot_id": "",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "k3s-data-dev",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "k3s-data-dev",
              "Project": "APIM"
            },
            "throughput": 125,
            "timeouts": null,
            "type": "gp3"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjMwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.k3s.data.aws_availability_zones.available"
          ]
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_ec2_tag",
      "name": "idle_shutdown",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "i-0f68a981d204e82a8,IdleShutdown",
            "key": "IdleShutdown",
            "resource_id": "i-0f68a981d204e82a8",
            "value": "enabled"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_security_group.alb",
            "data.aws_caller_identity.current",
            "module.alb.aws_lb.main",
            "module.ec2.aws_instance.portal",
            "module.ec2.aws_instance.webmethods",
            "module.k3s.aws_iam_instance_profile.k3s",
            "module.k3s.aws_iam_role.k3s",
            "module.k3s.aws_instance.k3s_server",
            "module.k3s.aws_security_group.k3s",
            "module.k3s.data.aws_ami.ubuntu",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_iam_instance_profile",
      "name": "k3s",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:instance-profile/k3s-instance-profile-dev",
            "create_date": "2025-12-19T14:03:41Z",
            "id": "k3s-instance-profile-dev",
            "name": "k3s-instance-profile-dev",
            "name_prefix": "",
            "path": "/",
            "role": "k3s-node-role-dev",
            "tags": null,
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "unique_id": "AIPA4LI47KH7Y4HGHXLBG"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.k3s.aws_iam_role.k3s"
          ]
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "idle_shutdown_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:role/k3s-idle-shutdown-dev",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-12-19T14:03:40Z",
            "description": "",
            "force_detach_policies": false,
            "id": "k3s-idle-shutdown-dev",
            "inline_policy": [],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "k3s-idle-shutdown-dev",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "unique_id": "AROA4LI47KH7QPPAIDX2Z"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "k3s",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:role/k3s-node-role-dev",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-12-19T14:03:40Z",
            "description": "",
            "force_detach_policies": false,
            "id": "k3s-node-role-dev",
            "inline_policy": [],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "k3s-node-role-dev",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "unique_id": "AROA4LI47KH74YEG63TWY"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "idle_shutdown_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "k3s-idle-shutdown-dev:k3s-idle-shutdown-policy",
            "name": "k3s-idle-shutdown-policy",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ec2:StopInstances\",\"ec2:DescribeInstances\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"cloudwatch:GetMetricStatistics\",\"cloudwatch:DescribeAlarms\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"},{\"Action\":[\"sns:Publish\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sns:eu-west-1:848853684735:k3s-idle-notifications-dev\"}]}",
            "role": "k3s-idle-shutdown-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.k3s.aws_iam_role.idle_shutdown_lambda",
            "module.k3s.aws_sns_topic.idle_notifications"
          ]
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "k3s_ssm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "k3s-node-role-dev:k3s-ssm-policy",
            "name": "k3s-ssm-policy",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ssm:UpdateInstanceInformation\",\"ssmmessages:CreateControlChannel\",\"ssmmessages:CreateDataChannel\",\"ssmmessages:OpenControlChannel\",\"ssmmessages:OpenDataChannel\",\"ssm:GetParameter\",\"ssm:GetParameters\",\"ssm:PutParameter\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\",\"logs:DescribeLogGroups\",\"logs:DescribeLogStreams\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"ecr:GetAuthorizationToken\",\"ecr:BatchCheckLayerAvailability\",\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::apim-*\",\"arn:aws:s3:::apim-*/*\"]},{\"Action\":[\"kms:Decrypt\",\"kms:Encrypt\",\"kms:DescribeKey\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:kms:eu-west-1:848853684735:key/62812b02-ef47-48cf-955b-355b831e2c9e\"]}]}",
            "role": "k3s-node-role-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_kms_key.vault",
            "module.k3s.aws_iam_role.k3s"
          ]
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_instance",
      "name": "k3s_server",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-0f27749973e2399b6",
            "arn": "arn:aws:ec2:eu-west-1:848853684735:instance/i-0f68a981d204e82a8",
            "associate_public_ip_address": false,
            "availability_zone": "eu-west-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 2
              }
            ],
            "cpu_threads_per_core": 2,
            "credit_specification": [
              {
                "cpu_credits": "unlimited"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enable_primary_ipv6": null,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "k3s-instance-profile-dev",
            "id": "i-0f68a981d204e82a8",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_lifecycle": "",
            "instance_market_options": [],
            "instance_state": "running",
            "instance_type": "t3.large",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": 0,
            "primary_network_interface_id": "eni-0da113141d897c73a",
            "private_dns": "ip-10-0-10-97.eu-west-1.compute.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.10.97",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": true,
                "iops": 3000,
                "kms_key_id": "arn:aws:kms:eu-west-1:848853684735:key/130cfc53-77fc-4326-8ef7-3877b6fd8867",
                "tags": null,
                "tags_all": {
                  "Environment": "dev",
                  "ManagedBy": "Terraform",
                  "Project": "APIM"
                },
                "throughput": 125,
                "volume_id": "vol-0d793b6c10098fea6",
                "volume_size": 50,
                "volume_type": "gp3"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "spot_instance_request_id": "",
            "subnet_id": "subnet-0ccaad7473290c6cb",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "k3s-server-dev",
              "Project": "APIM",
              "Role": "k3s-server"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "k3s-server-dev",
              "Project": "APIM",
              "Role": "k3s-server"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "f431cd991152dbfbc998cc795ae2cc4ec6cc4629",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-09ffc8aafa151cdf3"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwicmVhZCI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "aws_security_group.alb",
            "data.aws_caller_identity.current",
            "module.alb.aws_lb.main",
            "module.ec2.aws_instance.portal",
            "module.ec2.aws_instance.webmethods",
            "module.k3s.aws_iam_instance_profile.k3s",
            "module.k3s.aws_iam_role.k3s",
            "module.k3s.aws_security_group.k3s",
            "module.k3s.data.aws_ami.ubuntu",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "idle_shutdown",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:eu-west-1:848853684735:function:k3s-idle-shutdown-dev",
            "code_sha256": "vkLE5WJegblqfMTWQo/sm/9J4yl954CCKvRKRj1ClAI=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "CPU_THRESHOLD": "5",
                  "ENVIRONMENT": "dev",
                  "IDLE_MINUTES": "30",
                  "INSTANCE_ID": "i-0f68a981d204e82a8",
                  "SNS_TOPIC_ARN": "arn:aws:sns:eu-west-1:848853684735:k3s-idle-notifications-dev"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "../../modules/k3s-cluster/lambda/idle_shutdown.zip",
            "function_name": "k3s-idle-shutdown-dev",
            "handler": "index.handler",
            "id": "k3s-idle-shutdown-dev",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:848853684735:function:k3s-idle-shutdown-dev/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-12-19T14:04:03.937+0000",
            "layers": null,
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/k3s-idle-shutdown-dev",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:eu-west-1:848853684735:function:k3s-idle-shutdown-dev:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:848853684735:function:k3s-idle-shutdown-dev:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::848853684735:role/k3s-idle-shutdown-dev",
            "runtime": "python3.11",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "vkLE5WJegblqfMTWQo/sm/9J4yl954CCKvRKRj1ClAI=",
            "source_code_size": 1390,
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "timeout": 60,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_security_group.alb",
            "data.aws_caller_identity.current",
            "module.alb.aws_lb.main",
            "module.ec2.aws_instance.portal",
            "module.ec2.aws_instance.webmethods",
            "module.k3s.aws_iam_instance_profile.k3s",
            "module.k3s.aws_iam_role.idle_shutdown_lambda",
            "module.k3s.aws_iam_role.k3s",
            "module.k3s.aws_instance.k3s_server",
            "module.k3s.aws_security_group.k3s",
            "module.k3s.aws_sns_topic.idle_notifications",
            "module.k3s.data.archive_file.idle_shutdown_lambda",
            "module.k3s.data.aws_ami.ubuntu",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "idle_check",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "k3s-idle-shutdown-dev",
            "function_url_auth_type": null,
            "id": "AllowExecutionFromEventBridge",
            "principal": "events.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:events:eu-west-1:848853684735:rule/k3s-idle-check-dev",
            "statement_id": "AllowExecutionFromEventBridge",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_security_group.alb",
            "data.aws_caller_identity.current",
            "module.alb.aws_lb.main",
            "module.ec2.aws_instance.portal",
            "module.ec2.aws_instance.webmethods",
            "module.k3s.aws_cloudwatch_event_rule.idle_check",
            "module.k3s.aws_iam_instance_profile.k3s",
            "module.k3s.aws_iam_role.idle_shutdown_lambda",
            "module.k3s.aws_iam_role.k3s",
            "module.k3s.aws_instance.k3s_server",
            "module.k3s.aws_lambda_function.idle_shutdown",
            "module.k3s.aws_security_group.k3s",
            "module.k3s.aws_sns_topic.idle_notifications",
            "module.k3s.data.archive_file.idle_shutdown_lambda",
            "module.k3s.data.aws_ami.ubuntu",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "k3s_http",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/k3s-http-dev/a67412990ba7ebcb",
            "arn_suffix": "targetgroup/k3s-http-dev/a67412990ba7ebcb",
            "connection_termination": null,
            "deregistration_delay": "300",
            "health_check": [
              {
                "enabled": true,
                "healthy_threshold": 2,
                "interval": 30,
                "matcher": "200,404",
                "path": "/healthz",
                "port": "30080",
                "protocol": "HTTP",
                "timeout": 5,
                "unhealthy_threshold": 3
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/k3s-http-dev/a67412990ba7ebcb",
            "ip_address_type": "ipv4",
            "lambda_multi_value_headers_enabled": false,
            "load_balancer_arns": [],
            "load_balancing_algorithm_type": "round_robin",
            "load_balancing_anomaly_mitigation": "off",
            "load_balancing_cross_zone_enabled": "use_load_balancer_configuration",
            "name": "k3s-http-dev",
            "name_prefix": "",
            "port": 30080,
            "preserve_client_ip": null,
            "protocol": "HTTP",
            "protocol_version": "HTTP1",
            "proxy_protocol_v2": false,
            "slow_start": 0,
            "stickiness": [
              {
                "cookie_duration": 86400,
                "cookie_name": "",
                "enabled": false,
                "type": "lb_cookie"
              }
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "k3s-http-dev",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "k3s-http-dev",
              "Project": "APIM"
            },
            "target_failover": [
              {
                "on_deregistration": null,
                "on_unhealthy": null
              }
            ],
            "target_group_health": [
              {
                "dns_failover": [
                  {
                    "minimum_healthy_targets_count": "1",
                    "minimum_healthy_targets_percentage": "off"
                  }
                ],
                "unhealthy_state_routing": [
                  {
                    "minimum_healthy_targets_count": 1,
                    "minimum_healthy_targets_percentage": "off"
                  }
                ]
              }
            ],
            "target_health_state": [
              {
                "enable_unhealthy_connection_termination": null,
                "unhealthy_draining_interval": null
              }
            ],
            "target_type": "instance",
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "k3s_https",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/k3s-https-dev/1452cd99e86079f0",
            "arn_suffix": "targetgroup/k3s-https-dev/1452cd99e86079f0",
            "connection_termination": null,
            "deregistration_delay": "300",
            "health_check": [
              {
                "enabled": true,
                "healthy_threshold": 2,
                "interval": 30,
                "matcher": "200,404",
                "path": "/healthz",
                "port": "30080",
                "protocol": "HTTP",
                "timeout": 5,
                "unhealthy_threshold": 3
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/k3s-https-dev/1452cd99e86079f0",
            "ip_address_type": "ipv4",
            "lambda_multi_value_headers_enabled": false,
            "load_balancer_arns": [],
            "load_balancing_algorithm_type": "round_robin",
            "load_balancing_anomaly_mitigation": "off",
            "load_balancing_cross_zone_enabled": "use_load_balancer_configuration",
            "name": "k3s-https-dev",
            "name_prefix": "",
            "port": 30443,
            "preserve_client_ip": null,
            "protocol": "HTTP",
            "protocol_version": "HTTP1",
            "proxy_protocol_v2": false,
            "slow_start": 0,
            "stickiness": [
              {
                "cookie_duration": 86400,
                "cookie_name": "",
                "enabled": false,
                "type": "lb_cookie"
              }
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "k3s-https-dev",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "k3s-https-dev",
              "Project": "APIM"
            },
            "target_failover": [
              {
                "on_deregistration": null,
                "on_unhealthy": null
              }
            ],
            "target_group_health": [
              {
                "dns_failover": [
                  {
                    "minimum_healthy_targets_count": "1",
                    "minimum_healthy_targets_percentage": "off"
                  }
                ],
                "unhealthy_state_routing": [
                  {
                    "minimum_healthy_targets_count": 1,
                    "minimum_healthy_targets_percentage": "off"
                  }
                ]
              }
            ],
            "target_health_state": [
              {
                "enable_unhealthy_connection_termination": null,
                "unhealthy_draining_interval": null
              }
            ],
            "target_type": "instance",
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_lb_target_group_attachment",
      "name": "k3s_http",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_zone": null,
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/k3s-http-dev/a67412990ba7ebcb-20251219140403758200000004",
            "port": 30080,
            "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/k3s-http-dev/a67412990ba7ebcb",
            "target_id": "i-0f68a981d204e82a8"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_security_group.alb",
            "data.aws_caller_identity.current",
            "module.alb.aws_lb.main",
            "module.ec2.aws_instance.portal",
            "module.ec2.aws_instance.webmethods",
            "module.k3s.aws_iam_instance_profile.k3s",
            "module.k3s.aws_iam_role.k3s",
            "module.k3s.aws_instance.k3s_server",
            "module.k3s.aws_lb_target_group.k3s_http",
            "module.k3s.aws_security_group.k3s",
            "module.k3s.data.aws_ami.ubuntu",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_lb_target_group_attachment",
      "name": "k3s_https",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_zone": null,
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/k3s-https-dev/1452cd99e86079f0-20251219140403715200000003",
            "port": 30443,
            "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/k3s-https-dev/1452cd99e86079f0",
            "target_id": "i-0f68a981d204e82a8"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_security_group.alb",
            "data.aws_caller_identity.current",
            "module.alb.aws_lb.main",
            "module.ec2.aws_instance.portal",
            "module.ec2.aws_instance.webmethods",
            "module.k3s.aws_iam_instance_profile.k3s",
            "module.k3s.aws_iam_role.k3s",
            "module.k3s.aws_instance.k3s_server",
            "module.k3s.aws_lb_target_group.k3s_https",
            "module.k3s.aws_security_group.k3s",
            "module.k3s.data.aws_ami.ubuntu",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "k3s",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:security-group/sg-09ffc8aafa151cdf3",
            "description": "Security group for K3s cluster",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-09ffc8aafa151cdf3",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.0.0.0/16"
                ],
                "description": "All traffic from VPC",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              },
              {
                "cidr_blocks": [
                  "10.0.0.0/16"
                ],
                "description": "K3s API from VPC",
                "from_port": 6443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 6443
              },
              {
                "cidr_blocks": [],
                "description": "HTTP from ALB",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [
                  "sg-0e28af9bb36cfd149"
                ],
                "self": false,
                "to_port": 80
              },
              {
                "cidr_blocks": [],
                "description": "HTTPS from ALB",
                "from_port": 443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [
                  "sg-0e28af9bb36cfd149"
                ],
                "self": false,
                "to_port": 443
              },
              {
                "cidr_blocks": [],
                "description": "NodePort range from ALB",
                "from_port": 30000,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [
                  "sg-0e28af9bb36cfd149"
                ],
                "self": false,
                "to_port": 32767
              }
            ],
            "name": "k3s-dev",
            "name_prefix": "",
            "owner_id": "848853684735",
            "revoke_rules_on_delete": false,
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "k3s-dev",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "k3s-dev",
              "Project": "APIM"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "aws_security_group.alb",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_sns_topic",
      "name": "idle_notifications",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": 0,
            "archive_policy": "",
            "arn": "arn:aws:sns:eu-west-1:848853684735:k3s-idle-notifications-dev",
            "beginning_archive_time": "",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "",
            "fifo_throughput_scope": "",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": 0,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": 0,
            "id": "arn:aws:sns:eu-west-1:848853684735:k3s-idle-notifications-dev",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": 0,
            "name": "k3s-idle-notifications-dev",
            "name_prefix": "",
            "owner": "848853684735",
            "policy": "{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"848853684735\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:eu-west-1:848853684735:k3s-idle-notifications-dev\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}",
            "signature_version": 0,
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": 0,
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tracing_config": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "k3s_token",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allowed_pattern": "",
            "arn": "arn:aws:ssm:eu-west-1:848853684735:parameter/k3s/dev/token",
            "data_type": "text",
            "description": "K3s node token",
            "has_value_wo": null,
            "id": "/k3s/dev/token",
            "insecure_value": null,
            "key_id": "alias/aws/ssm",
            "name": "/k3s/dev/token",
            "overwrite": null,
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tier": "Standard",
            "type": "SecureString",
            "value": "placeholder-will-be-updated-by-instance",
            "value_wo": null,
            "value_wo_version": null,
            "version": 1
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "kubeconfig",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allowed_pattern": "",
            "arn": "arn:aws:ssm:eu-west-1:848853684735:parameter/k3s/dev/kubeconfig",
            "data_type": "text",
            "description": "K3s kubeconfig",
            "has_value_wo": null,
            "id": "/k3s/dev/kubeconfig",
            "insecure_value": null,
            "key_id": "alias/aws/ssm",
            "name": "/k3s/dev/kubeconfig",
            "overwrite": null,
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tier": "Standard",
            "type": "SecureString",
            "value": "placeholder-will-be-updated-by-instance",
            "value_wo": null,
            "value_wo_version": null,
            "version": 1
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.k3s",
      "mode": "managed",
      "type": "aws_volume_attachment",
      "name": "k3s_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "device_name": "/dev/sdf",
            "force_detach": null,
            "id": "vai-2777639794",
            "instance_id": "i-0f68a981d204e82a8",
            "skip_destroy": null,
            "stop_instance_before_detaching": null,
            "timeouts": null,
            "volume_id": "vol-053595d2c53fcc646"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "aws_security_group.alb",
            "data.aws_caller_identity.current",
            "module.alb.aws_lb.main",
            "module.ec2.aws_instance.portal",
            "module.ec2.aws_instance.webmethods",
            "module.k3s.aws_ebs_volume.k3s_data",
            "module.k3s.aws_iam_instance_profile.k3s",
            "module.k3s.aws_iam_role.k3s",
            "module.k3s.aws_instance.k3s_server",
            "module.k3s.aws_security_group.k3s",
            "module.k3s.data.aws_ami.ubuntu",
            "module.k3s.data.aws_availability_zones.available",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "data",
      "type": "aws_ami",
      "name": "amazon_linux_2023",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architecture": "x86_64",
            "arn": "arn:aws:ec2:eu-west-1::image/ami-0afbb577eee274d3c",
            "block_device_mappings": [
              {
                "device_name": "/dev/xvda",
                "ebs": {
                  "delete_on_termination": "true",
                  "encrypted": "false",
                  "iops": "3000",
                  "snapshot_id": "snap-07f1c529f0c9c0eac",
                  "throughput": "125",
                  "volume_initialization_rate": "0",
                  "volume_size": "30",
                  "volume_type": "gp3"
                },
                "no_device": "",
                "virtual_name": ""
              }
            ],
            "boot_mode": "uefi-preferred",
            "creation_date": "2025-12-09T22:11:59.000Z",
            "deprecation_time": "2027-12-09T22:11:59.000Z",
            "description": "Amazon Linux AMI 2023.0.20251209 x86_64 ECS HVM EBS",
            "ena_support": true,
            "executable_users": null,
            "filter": [
              {
                "name": "name",
                "values": [
                  "al2023-ami-*-x86_64"
                ]
              },
              {
                "name": "virtualization-type",
                "values": [
                  "hvm"
                ]
              }
            ],
            "hypervisor": "xen",
            "id": "ami-0afbb577eee274d3c",
            "image_id": "ami-0afbb577eee274d3c",
            "image_location": "amazon/al2023-ami-ecs-hvm-2023.0.20251209-kernel-6.1-x86_64",
            "image_owner_alias": "amazon",
            "image_type": "machine",
            "imds_support": "v2.0",
            "include_deprecated": false,
            "kernel_id": "",
            "last_launched_time": "",
            "most_recent": true,
            "name": "al2023-ami-ecs-hvm-2023.0.20251209-kernel-6.1-x86_64",
            "name_regex": null,
            "owner_id": "591542846629",
            "owners": [
              "amazon"
            ],
            "platform": "",
            "platform_details": "Linux/UNIX",
            "product_codes": [],
            "public": true,
            "ramdisk_id": "",
            "root_device_name": "/dev/xvda",
            "root_device_type": "ebs",
            "root_snapshot_id": "snap-07f1c529f0c9c0eac",
            "sriov_net_support": "simple",
            "state": "available",
            "state_reason": {
              "code": "UNSET",
              "message": "UNSET"
            },
            "tags": {},
            "timeouts": null,
            "tpm_support": "",
            "uefi_data": null,
            "usage_operation": "RunInstances",
            "virtualization_type": "hvm"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "aws_iam_instance_profile",
      "name": "keycloak",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:instance-profile/apim-keycloak-profile-dev",
            "create_date": "2025-12-18T20:46:21Z",
            "id": "apim-keycloak-profile-dev",
            "name": "apim-keycloak-profile-dev",
            "name_prefix": "",
            "path": "/",
            "role": "apim-keycloak-role-dev",
            "tags": {},
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "unique_id": "AIPA4LI47KH7UJAUBUH5Z"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "module.keycloak.aws_iam_role.keycloak"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "keycloak",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::848853684735:role/apim-keycloak-role-dev",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-12-18T20:46:20Z",
            "description": "",
            "force_detach_policies": false,
            "id": "apim-keycloak-role-dev",
            "inline_policy": [
              {
                "name": "ECRFullAccess",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecr:GetAuthorizationToken\",\"ecr:BatchCheckLayerAvailability\",\"ecr:GetDownloadUrlForLayer\",\"ecr:GetRepositoryPolicy\",\"ecr:DescribeRepositories\",\"ecr:ListImages\",\"ecr:DescribeImages\",\"ecr:BatchGetImage\",\"ecr:InitiateLayerUpload\",\"ecr:UploadLayerPart\",\"ecr:CompleteLayerUpload\",\"ecr:PutImage\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              },
              {
                "name": "keycloak-s3-access",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::apim-artifacts-dev\",\"arn:aws:s3:::apim-artifacts-dev/*\"]}]}"
              }
            ],
            "managed_policy_arns": [
              "arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"
            ],
            "max_session_duration": 3600,
            "name": "apim-keycloak-role-dev",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Project": "APIM"
            },
            "unique_id": "AROA4LI47KH7YNYLFLWQQ"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "keycloak_s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "apim-keycloak-role-dev:keycloak-s3-access",
            "name": "keycloak-s3-access",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::apim-artifacts-dev\",\"arn:aws:s3:::apim-artifacts-dev/*\"]}]}",
            "role": "apim-keycloak-role-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.artifacts",
            "module.keycloak.aws_iam_role.keycloak"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "keycloak_ssm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "apim-keycloak-role-dev-20251219130341212900000002",
            "policy_arn": "arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore",
            "role": "apim-keycloak-role-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.keycloak.aws_iam_role.keycloak"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "aws_instance",
      "name": "keycloak",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-0afbb577eee274d3c",
            "arn": "arn:aws:ec2:eu-west-1:848853684735:instance/i-0c844399fa2f70884",
            "associate_public_ip_address": false,
            "availability_zone": "eu-west-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 2
              }
            ],
            "cpu_threads_per_core": 2,
            "credit_specification": [
              {
                "cpu_credits": "unlimited"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enable_primary_ipv6": null,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "apim-keycloak-profile-dev",
            "id": "i-0c844399fa2f70884",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_lifecycle": "",
            "instance_market_options": [],
            "instance_state": "running",
            "instance_type": "t3.medium",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 2,
                "http_tokens": "required",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": 0,
            "primary_network_interface_id": "eni-06867d7898700619e",
            "private_dns": "ip-10-0-10-21.eu-west-1.compute.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.10.21",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": true,
                "iops": 3000,
                "kms_key_id": "arn:aws:kms:eu-west-1:848853684735:key/130cfc53-77fc-4326-8ef7-3877b6fd8867",
                "tags": {},
                "tags_all": {
                  "Environment": "dev",
                  "ManagedBy": "Terraform",
                  "Project": "APIM"
                },
                "throughput": 125,
                "volume_id": "vol-0345b080b9f6396c5",
                "volume_size": 30,
                "volume_type": "gp3"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "spot_instance_request_id": "",
            "subnet_id": "subnet-0ccaad7473290c6cb",
            "tags": {
              "AutoStop": "false",
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-keycloak-dev",
              "Project": "APIM",
              "Service": "Keycloak"
            },
            "tags_all": {
              "AutoStop": "false",
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-keycloak-dev",
              "Project": "APIM",
              "Service": "Keycloak"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "4c9c09e2cbd2560628357123a7871081959f2bf3",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-06b9455797abbe490"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "user_data"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwicmVhZCI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "aws_security_group.alb",
            "module.keycloak.aws_iam_instance_profile.keycloak",
            "module.keycloak.aws_iam_role.keycloak",
            "module.keycloak.aws_security_group.keycloak",
            "module.keycloak.data.aws_ami.amazon_linux_2023",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "keycloak",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-keycloak-dev/9622b0daa07d4e09",
            "arn_suffix": "targetgroup/apim-keycloak-dev/9622b0daa07d4e09",
            "connection_termination": null,
            "deregistration_delay": "30",
            "health_check": [
              {
                "enabled": true,
                "healthy_threshold": 2,
                "interval": 30,
                "matcher": "200",
                "path": "/health/ready",
                "port": "traffic-port",
                "protocol": "HTTP",
                "timeout": 10,
                "unhealthy_threshold": 3
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-keycloak-dev/9622b0daa07d4e09",
            "ip_address_type": "ipv4",
            "lambda_multi_value_headers_enabled": false,
            "load_balancer_arns": [
              "arn:aws:elasticloadbalancing:eu-west-1:848853684735:loadbalancer/app/apim-alb-dev/6e063017bb17d1dd"
            ],
            "load_balancing_algorithm_type": "round_robin",
            "load_balancing_anomaly_mitigation": "off",
            "load_balancing_cross_zone_enabled": "use_load_balancer_configuration",
            "name": "apim-keycloak-dev",
            "name_prefix": "",
            "port": 8080,
            "preserve_client_ip": null,
            "protocol": "HTTP",
            "protocol_version": "HTTP1",
            "proxy_protocol_v2": false,
            "slow_start": 0,
            "stickiness": [
              {
                "cookie_duration": 86400,
                "cookie_name": "",
                "enabled": false,
                "type": "lb_cookie"
              }
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "keycloak-tg",
              "Project": "APIM",
              "Service": "Keycloak"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "keycloak-tg",
              "Project": "APIM",
              "Service": "Keycloak"
            },
            "target_failover": [
              {
                "on_deregistration": null,
                "on_unhealthy": null
              }
            ],
            "target_group_health": [
              {
                "dns_failover": [
                  {
                    "minimum_healthy_targets_count": "1",
                    "minimum_healthy_targets_percentage": "off"
                  }
                ],
                "unhealthy_state_routing": [
                  {
                    "minimum_healthy_targets_count": 1,
                    "minimum_healthy_targets_percentage": "off"
                  }
                ]
              }
            ],
            "target_health_state": [
              {
                "enable_unhealthy_connection_termination": null,
                "unhealthy_draining_interval": null
              }
            ],
            "target_type": "instance",
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "aws_lb_target_group_attachment",
      "name": "keycloak",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "availability_zone": null,
            "id": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-keycloak-dev/9622b0daa07d4e09-20251219131514034400000004",
            "port": 8080,
            "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:848853684735:targetgroup/apim-keycloak-dev/9622b0daa07d4e09",
            "target_id": "i-0c844399fa2f70884"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_security_group.alb",
            "module.keycloak.aws_iam_instance_profile.keycloak",
            "module.keycloak.aws_iam_role.keycloak",
            "module.keycloak.aws_instance.keycloak",
            "module.keycloak.aws_lb_target_group.keycloak",
            "module.keycloak.aws_security_group.keycloak",
            "module.keycloak.data.aws_ami.amazon_linux_2023",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.keycloak",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "keycloak",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:security-group/sg-06b9455797abbe490",
            "description": "Security group for Keycloak",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-06b9455797abbe490",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.0.0.0/16"
                ],
                "description": "Keycloak HTTP from VPC (for OIDC)",
                "from_port": 8080,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 8080
              },
              {
                "cidr_blocks": [],
                "description": "Keycloak HTTP from ALB",
                "from_port": 8080,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [
                  "sg-0e28af9bb36cfd149"
                ],
                "self": false,
                "to_port": 8080
              },
              {
                "cidr_blocks": [],
                "description": "Keycloak HTTPS from ALB",
                "from_port": 8443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [
                  "sg-0e28af9bb36cfd149"
                ],
                "self": false,
                "to_port": 8443
              }
            ],
            "name": "apim-keycloak-sg-dev",
            "name_prefix": "",
            "owner_id": "848853684735",
            "revoke_rules_on_delete": false,
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-keycloak-sg",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-keycloak-sg",
              "Project": "APIM"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "aws_security_group.alb",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_eip",
      "name": "nat",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "address": null,
            "allocation_id": "eipalloc-0d5aa444111704951",
            "arn": "arn:aws:ec2:eu-west-1:848853684735:elastic-ip/eipalloc-0d5aa444111704951",
            "associate_with_private_ip": null,
            "association_id": "eipassoc-04b79ae27055798c9",
            "carrier_ip": "",
            "customer_owned_ip": "",
            "customer_owned_ipv4_pool": "",
            "domain": "vpc",
            "id": "eipalloc-0d5aa444111704951",
            "instance": "",
            "ipam_pool_id": null,
            "network_border_group": "eu-west-1",
            "network_interface": "eni-0623a95430f027faf",
            "private_dns": "ip-10-0-0-96.eu-west-1.compute.internal",
            "private_ip": "10.0.0.96",
            "ptr_record": "",
            "public_dns": "ec2-99-81-251-187.eu-west-1.compute.amazonaws.com",
            "public_ip": "99.81.251.187",
            "public_ipv4_pool": "amazon",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-nat-eip-dev",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-nat-eip-dev",
              "Project": "APIM"
            },
            "timeouts": null,
            "vpc": true
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxODAwMDAwMDAwMDAsInJlYWQiOjkwMDAwMDAwMDAwMCwidXBkYXRlIjozMDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.vpc.aws_internet_gateway.main",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_internet_gateway",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:internet-gateway/igw-0bf8d2bdcb777fecf",
            "id": "igw-0bf8d2bdcb777fecf",
            "owner_id": "848853684735",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-igw-dev",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-igw-dev",
              "Project": "APIM"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_nat_gateway",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_id": "eipalloc-0d5aa444111704951",
            "association_id": "eipassoc-04b79ae27055798c9",
            "connectivity_type": "public",
            "id": "nat-008bc3519981270c1",
            "network_interface_id": "eni-0623a95430f027faf",
            "private_ip": "10.0.0.96",
            "public_ip": "99.81.251.187",
            "secondary_allocation_ids": [],
            "secondary_private_ip_address_count": 0,
            "secondary_private_ip_addresses": [],
            "subnet_id": "subnet-0a10a297cb6fbbf99",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-nat-dev",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-nat-dev",
              "Project": "APIM"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.vpc.aws_eip.nat",
            "module.vpc.aws_internet_gateway.main",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "private",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:route-table/rtb-005c5503969658427",
            "id": "rtb-005c5503969658427",
            "owner_id": "848853684735",
            "propagating_vgws": [],
            "route": [
              {
                "carrier_gateway_id": "",
                "cidr_block": "0.0.0.0/0",
                "core_network_arn": "",
                "destination_prefix_list_id": "",
                "egress_only_gateway_id": "",
                "gateway_id": "",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "nat-008bc3519981270c1",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_endpoint_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-private-rt-dev",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-private-rt-dev",
              "Project": "APIM"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_eip.nat",
            "module.vpc.aws_internet_gateway.main",
            "module.vpc.aws_nat_gateway.main",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "public",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:route-table/rtb-026e6b31c46865aa5",
            "id": "rtb-026e6b31c46865aa5",
            "owner_id": "848853684735",
            "propagating_vgws": [],
            "route": [
              {
                "carrier_gateway_id": "",
                "cidr_block": "0.0.0.0/0",
                "core_network_arn": "",
                "destination_prefix_list_id": "",
                "egress_only_gateway_id": "",
                "gateway_id": "igw-0bf8d2bdcb777fecf",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_endpoint_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-public-rt-dev",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-public-rt-dev",
              "Project": "APIM"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_internet_gateway.main",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "database",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-0547915d31e58d744",
            "route_table_id": "rtb-005c5503969658427",
            "subnet_id": "subnet-021834b091a9eb76e",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_eip.nat",
            "module.vpc.aws_internet_gateway.main",
            "module.vpc.aws_nat_gateway.main",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.database",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-060dd25800279e8db",
            "route_table_id": "rtb-005c5503969658427",
            "subnet_id": "subnet-0cad0f2f46a5094f2",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_eip.nat",
            "module.vpc.aws_internet_gateway.main",
            "module.vpc.aws_nat_gateway.main",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.database",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "private",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-0bccdcceb6cb860f0",
            "route_table_id": "rtb-005c5503969658427",
            "subnet_id": "subnet-0ccaad7473290c6cb",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_eip.nat",
            "module.vpc.aws_internet_gateway.main",
            "module.vpc.aws_nat_gateway.main",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-0c7445d7360725b48",
            "route_table_id": "rtb-005c5503969658427",
            "subnet_id": "subnet-020d367b03dfaa70b",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_eip.nat",
            "module.vpc.aws_internet_gateway.main",
            "module.vpc.aws_nat_gateway.main",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "public",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-0bf9bc22d02795202",
            "route_table_id": "rtb-026e6b31c46865aa5",
            "subnet_id": "subnet-0a10a297cb6fbbf99",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_internet_gateway.main",
            "module.vpc.aws_route_table.public",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-0f96c2f213cd94782",
            "route_table_id": "rtb-026e6b31c46865aa5",
            "subnet_id": "subnet-062d25cec2f53b479",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_internet_gateway.main",
            "module.vpc.aws_route_table.public",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "vpc_endpoints",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:security-group/sg-02aad4a75a5f6e21c",
            "description": "Security group for VPC endpoints",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-02aad4a75a5f6e21c",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.0.0.0/16"
                ],
                "description": "",
                "from_port": 443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 443
              }
            ],
            "name": "apim-vpc-endpoints-sg-dev",
            "name_prefix": "",
            "owner_id": "848853684735",
            "revoke_rules_on_delete": false,
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-vpc-endpoints-sg-dev",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-vpc-endpoints-sg-dev",
              "Project": "APIM"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "database",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:subnet/subnet-021834b091a9eb76e",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-west-1a",
            "availability_zone_id": "euw1-az3",
            "cidr_block": "10.0.20.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-021834b091a9eb76e",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "848853684735",
            "private_dns_hostname_type_on_launch": "ip-name",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-database-subnet-1-dev",
              "Project": "APIM",
              "Type": "database"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-database-subnet-1-dev",
              "Project": "APIM",
              "Type": "database"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:subnet/subnet-0cad0f2f46a5094f2",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-west-1b",
            "availability_zone_id": "euw1-az1",
            "cidr_block": "10.0.21.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-0cad0f2f46a5094f2",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "848853684735",
            "private_dns_hostname_type_on_launch": "ip-name",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-database-subnet-2-dev",
              "Project": "APIM",
              "Type": "database"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-database-subnet-2-dev",
              "Project": "APIM",
              "Type": "database"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "private",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:subnet/subnet-0ccaad7473290c6cb",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-west-1a",
            "availability_zone_id": "euw1-az3",
            "cidr_block": "10.0.10.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-0ccaad7473290c6cb",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "848853684735",
            "private_dns_hostname_type_on_launch": "ip-name",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-private-subnet-1-dev",
              "Project": "APIM",
              "Type": "private"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-private-subnet-1-dev",
              "Project": "APIM",
              "Type": "private"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:subnet/subnet-020d367b03dfaa70b",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-west-1b",
            "availability_zone_id": "euw1-az1",
            "cidr_block": "10.0.11.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-020d367b03dfaa70b",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "848853684735",
            "private_dns_hostname_type_on_launch": "ip-name",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-private-subnet-2-dev",
              "Project": "APIM",
              "Type": "private"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-private-subnet-2-dev",
              "Project": "APIM",
              "Type": "private"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "public",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:subnet/subnet-0a10a297cb6fbbf99",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-west-1a",
            "availability_zone_id": "euw1-az3",
            "cidr_block": "10.0.0.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-0a10a297cb6fbbf99",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": true,
            "outpost_arn": "",
            "owner_id": "848853684735",
            "private_dns_hostname_type_on_launch": "ip-name",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-public-subnet-1-dev",
              "Project": "APIM",
              "Type": "public"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-public-subnet-1-dev",
              "Project": "APIM",
              "Type": "public"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:subnet/subnet-062d25cec2f53b479",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-west-1b",
            "availability_zone_id": "euw1-az1",
            "cidr_block": "10.0.1.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-062d25cec2f53b479",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": true,
            "outpost_arn": "",
            "owner_id": "848853684735",
            "private_dns_hostname_type_on_launch": "ip-name",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-public-subnet-2-dev",
              "Project": "APIM",
              "Type": "public"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-public-subnet-2-dev",
              "Project": "APIM",
              "Type": "public"
            },
            "timeouts": null,
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_vpc",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:vpc/vpc-0543d8ac2b5b9024e",
            "assign_generated_ipv6_cidr_block": false,
            "cidr_block": "10.0.0.0/16",
            "default_network_acl_id": "acl-0e6f00550d9de0719",
            "default_route_table_id": "rtb-0683e7693c954480b",
            "default_security_group_id": "sg-0363b356bd1018f52",
            "dhcp_options_id": "dopt-07b3a22cdb22441c0",
            "enable_dns_hostnames": true,
            "enable_dns_support": true,
            "enable_network_address_usage_metrics": false,
            "id": "vpc-0543d8ac2b5b9024e",
            "instance_tenancy": "default",
            "ipv4_ipam_pool_id": null,
            "ipv4_netmask_length": null,
            "ipv6_association_id": "",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_network_border_group": "",
            "ipv6_ipam_pool_id": "",
            "ipv6_netmask_length": 0,
            "main_route_table_id": "rtb-0683e7693c954480b",
            "owner_id": "848853684735",
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-vpc-dev",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-vpc-dev",
              "Project": "APIM"
            }
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_vpc_endpoint",
      "name": "s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:vpc-endpoint/vpce-03cc8a527ceedd683",
            "auto_accept": null,
            "cidr_blocks": [
              "3.5.64.0/21",
              "3.5.72.0/23",
              "52.92.0.0/17",
              "52.218.0.0/17"
            ],
            "dns_entry": [],
            "dns_options": [
              {
                "dns_record_ip_type": "service-defined",
                "private_dns_only_for_inbound_resolver_endpoint": false
              }
            ],
            "id": "vpce-03cc8a527ceedd683",
            "ip_address_type": "ipv4",
            "network_interface_ids": [],
            "owner_id": "848853684735",
            "policy": "{\"Statement\":[{\"Action\":\"*\",\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"*\"}],\"Version\":\"2008-10-17\"}",
            "prefix_list_id": "pl-6da54004",
            "private_dns_enabled": false,
            "requester_managed": false,
            "resource_configuration_arn": "",
            "route_table_ids": [
              "rtb-005c5503969658427",
              "rtb-026e6b31c46865aa5"
            ],
            "security_group_ids": [],
            "service_name": "com.amazonaws.eu-west-1.s3",
            "service_network_arn": "",
            "service_region": "eu-west-1",
            "state": "available",
            "subnet_configuration": [],
            "subnet_ids": [],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-s3-endpoint-dev",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-s3-endpoint-dev",
              "Project": "APIM"
            },
            "timeouts": null,
            "vpc_endpoint_type": "Gateway",
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_eip.nat",
            "module.vpc.aws_internet_gateway.main",
            "module.vpc.aws_nat_gateway.main",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_route_table.public",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_vpc_endpoint",
      "name": "ssm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:848853684735:vpc-endpoint/vpce-07ce54b01c28fcc8a",
            "auto_accept": null,
            "cidr_blocks": [],
            "dns_entry": [
              {
                "dns_name": "vpce-07ce54b01c28fcc8a-g53rjlfk.ssm.eu-west-1.vpce.amazonaws.com",
                "hosted_zone_id": "Z38GZ743OKFT7T"
              },
              {
                "dns_name": "vpce-07ce54b01c28fcc8a-g53rjlfk-eu-west-1b.ssm.eu-west-1.vpce.amazonaws.com",
                "hosted_zone_id": "Z38GZ743OKFT7T"
              },
              {
                "dns_name": "vpce-07ce54b01c28fcc8a-g53rjlfk-eu-west-1a.ssm.eu-west-1.vpce.amazonaws.com",
                "hosted_zone_id": "Z38GZ743OKFT7T"
              },
              {
                "dns_name": "ssm.eu-west-1.amazonaws.com",
                "hosted_zone_id": "Z01580533190OTPYEY3OG"
              },
              {
                "dns_name": "ssm.eu-west-1.api.aws",
                "hosted_zone_id": "Z09295591724LNIU9HIYS"
              }
            ],
            "dns_options": [
              {
                "dns_record_ip_type": "ipv4",
                "private_dns_only_for_inbound_resolver_endpoint": false
              }
            ],
            "id": "vpce-07ce54b01c28fcc8a",
            "ip_address_type": "ipv4",
            "network_interface_ids": [
              "eni-029a929fa098e1d1e",
              "eni-0cdbb481846fd3148"
            ],
            "owner_id": "848853684735",
            "policy": "{\"Statement\":[{\"Action\":\"*\",\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"*\"}]}",
            "prefix_list_id": null,
            "private_dns_enabled": true,
            "requester_managed": false,
            "resource_configuration_arn": "",
            "route_table_ids": [],
            "security_group_ids": [
              "sg-02aad4a75a5f6e21c"
            ],
            "service_name": "com.amazonaws.eu-west-1.ssm",
            "service_network_arn": "",
            "service_region": "eu-west-1",
            "state": "available",
            "subnet_configuration": [
              {
                "ipv4": "10.0.10.115",
                "ipv6": "",
                "subnet_id": "subnet-0ccaad7473290c6cb"
              },
              {
                "ipv4": "10.0.11.91",
                "ipv6": "",
                "subnet_id": "subnet-020d367b03dfaa70b"
              }
            ],
            "subnet_ids": [
              "subnet-020d367b03dfaa70b",
              "subnet-0ccaad7473290c6cb"
            ],
            "tags": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-ssm-endpoint-dev",
              "Project": "APIM"
            },
            "tags_all": {
              "CostCenter": "Platform",
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "apim-ssm-endpoint-dev",
              "Project": "APIM"
            },
            "timeouts": null,
            "vpc_endpoint_type": "Interface",
            "vpc_id": "vpc-0543d8ac2b5b9024e"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_security_group.vpc_endpoints",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    }
  ],
  "check_results": null
}

