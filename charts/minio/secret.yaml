# MinIO credentials secret for Error Snapshots
# Apply with: kubectl apply -f secret.yaml -n stoa-system
#
# For production, use sealed-secrets or external-secrets-operator
# to manage credentials securely.

apiVersion: v1
kind: Secret
metadata:
  name: error-snapshots-minio
  namespace: stoa-system
  labels:
    app.kubernetes.io/name: minio
    app.kubernetes.io/component: error-snapshots
    app.kubernetes.io/part-of: stoa-platform
type: Opaque
stringData:
  # MinIO root credentials - MANAGED VIA VAULT
  # Values are populated by External Secrets or manual rotation
  # See: vault kv get secret/apim/dev/minio
  root-user: "minioadmin"
  root-password: "${MINIO_ROOT_PASSWORD}"  # Populated from Vault

  # Credentials for error-snapshots service
  access-key: "error-snapshots-user"
  secret-key: "${MINIO_SECRET_KEY}"  # Populated from Vault

---
# Secret for MinIO root credentials (used by MinIO itself)
apiVersion: v1
kind: Secret
metadata:
  name: minio-credentials
  namespace: stoa-system
  labels:
    app.kubernetes.io/name: minio
type: Opaque
stringData:
  # MANAGED VIA VAULT - see: vault kv get secret/apim/dev/minio
  rootUser: "minioadmin"
  rootPassword: "${MINIO_ROOT_PASSWORD}"  # Populated from Vault
