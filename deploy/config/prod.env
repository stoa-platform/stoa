# STOA Platform - Production Environment Configuration
# CRITICAL: Review all values before deploying to production
#
# IMPORTANT: Only BASE_DOMAIN needs to be changed per client installation
# All other domain-related URLs are derived from it automatically

# ============================================
# BASE DOMAIN - Single source of truth
# ============================================
BASE_DOMAIN=stoa.cab-i.com

# ============================================
# API Configuration
# ============================================
API_VERSION=2.0.0
API_DEBUG=false
ENABLE_DEPLOYMENT_WORKER=true

# ============================================
# Keycloak Configuration
# Derived from BASE_DOMAIN
# ============================================
KEYCLOAK_URL=https://auth.${BASE_DOMAIN}
KEYCLOAK_REALM=stoa
KEYCLOAK_CLIENT_ID=control-plane-api
KEYCLOAK_CLIENT_SECRET=  # Set via Kubernetes secret (Vault recommended)

# ============================================
# GitLab Configuration
# ============================================
GITLAB_URL=https://gitlab.com
GITLAB_PROJECT_ID=  # Production project ID
GITLAB_TOKEN=  # Set via Kubernetes secret (Vault recommended)
GITLAB_WEBHOOK_SECRET=  # Set via Kubernetes secret (Vault recommended)

# ============================================
# Kafka Configuration
# ============================================
KAFKA_BOOTSTRAP_SERVERS=redpanda.stoa-system.svc.cluster.local:9092

# ============================================
# AWX Configuration
# Derived from BASE_DOMAIN
# ============================================
AWX_URL=https://awx.${BASE_DOMAIN}
AWX_TOKEN=  # Set via Kubernetes secret (Vault recommended)

# ============================================
# CORS Configuration
# Derived from BASE_DOMAIN
# ============================================
CORS_ORIGINS=https://console.${BASE_DOMAIN}

# ============================================
# UI Configuration (Build-time variables)
# Derived from BASE_DOMAIN
# ============================================
VITE_BASE_DOMAIN=${BASE_DOMAIN}
VITE_API_URL=https://api.${BASE_DOMAIN}
VITE_KEYCLOAK_URL=https://auth.${BASE_DOMAIN}
VITE_KEYCLOAK_REALM=stoa
VITE_KEYCLOAK_CLIENT_ID=control-plane-ui
VITE_GATEWAY_URL=https://gateway.${BASE_DOMAIN}
VITE_AWX_URL=https://awx.${BASE_DOMAIN}

# ============================================
# Derived Domain URLs (for reference/scripts)
# ============================================
DOMAIN_API=api.${BASE_DOMAIN}
DOMAIN_UI=console.${BASE_DOMAIN}
DOMAIN_AUTH=auth.${BASE_DOMAIN}
DOMAIN_GATEWAY=gateway.${BASE_DOMAIN}
DOMAIN_AWX=awx.${BASE_DOMAIN}
DOMAIN_ARGOCD=argocd.${BASE_DOMAIN}
DOMAIN_VAULT=vault.${BASE_DOMAIN}

# ============================================
# Production-specific settings
# ============================================
# Enable additional security measures
SECURE_HEADERS=true
RATE_LIMITING=true
AUDIT_LOGGING=true
