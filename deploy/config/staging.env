# STOA Platform - Staging Environment Configuration
#
# IMPORTANT: Only BASE_DOMAIN needs to be changed per client installation
# All other domain-related URLs are derived from it automatically

# ============================================
# BASE DOMAIN - Single source of truth
# ============================================
BASE_DOMAIN=staging.gostoa.dev

# ============================================
# API Configuration
# ============================================
API_VERSION=2.0.0
API_DEBUG=false
ENABLE_DEPLOYMENT_WORKER=true

# ============================================
# Keycloak Configuration
# Derived from BASE_DOMAIN
# ============================================
KEYCLOAK_URL=https://auth.${BASE_DOMAIN}
KEYCLOAK_REALM=stoa
KEYCLOAK_CLIENT_ID=control-plane-api
KEYCLOAK_CLIENT_SECRET=  # Set via Kubernetes secret

# ============================================
# GitLab Configuration
# ============================================
GITLAB_URL=https://gitlab.com
GITLAB_TOKEN=  # Set via Kubernetes secret
GITLAB_WEBHOOK_SECRET=  # Set via Kubernetes secret

# stoa-catalog: Source of truth for APIs (Portal catalog)
GITLAB_CATALOG_PROJECT_ID=47495759
GITLAB_CATALOG_PROJECT_PATH=cab6961310/stoa-catalog

# stoa-gitops: Infrastructure configs, policies, Ansible playbooks
GITLAB_GITOPS_PROJECT_ID=77260481
GITLAB_GITOPS_PROJECT_PATH=cab6961310/stoa-gitops

# ============================================
# Kafka (Redpanda) Configuration
# ============================================
KAFKA_BOOTSTRAP_SERVERS=redpanda.stoa-system.svc.cluster.local:9092

# ============================================
# AWX Configuration
# Derived from BASE_DOMAIN
# ============================================
AWX_URL=https://awx.${BASE_DOMAIN}
AWX_TOKEN=  # Set via Kubernetes secret

# ============================================
# CORS Configuration
# Derived from BASE_DOMAIN
# ============================================
CORS_ORIGINS=https://console.${BASE_DOMAIN}

# ============================================
# UI Configuration (Build-time variables)
# Derived from BASE_DOMAIN
# ============================================
VITE_BASE_DOMAIN=${BASE_DOMAIN}
VITE_API_URL=https://api.${BASE_DOMAIN}
VITE_KEYCLOAK_URL=https://auth.${BASE_DOMAIN}
VITE_KEYCLOAK_REALM=stoa
VITE_KEYCLOAK_CLIENT_ID=control-plane-ui
VITE_GATEWAY_URL=https://gateway.${BASE_DOMAIN}
VITE_AWX_URL=https://awx.${BASE_DOMAIN}

# ============================================
# Derived Domain URLs (for reference/scripts)
# ============================================
DOMAIN_API=api.${BASE_DOMAIN}
DOMAIN_UI=console.${BASE_DOMAIN}
DOMAIN_AUTH=auth.${BASE_DOMAIN}
DOMAIN_GATEWAY=gateway.${BASE_DOMAIN}
DOMAIN_AWX=awx.${BASE_DOMAIN}
DOMAIN_ARGOCD=argocd.${BASE_DOMAIN}
DOMAIN_VAULT=vault.${BASE_DOMAIN}
