{
  "realm": "demo-org-gamma",
  "enabled": true,
  "displayName": "Demo Org Gamma (LDAP Federation)",
  "registrationAllowed": false,
  "loginWithEmailAllowed": true,
  "duplicateEmailsAllowed": false,
  "bruteForceProtected": true,
  "accessTokenLifespan": 1800,
  "ssoSessionIdleTimeout": 1800,
  "ssoSessionMaxLifespan": 36000,
  "roles": {
    "realm": [
      {
        "name": "api-consumer",
        "description": "Can consume APIs subscribed by this organization"
      },
      {
        "name": "api-publisher",
        "description": "Can publish APIs on behalf of this organization"
      }
    ]
  },
  "components": {
    "org.keycloak.storage.UserStorageProvider": [
      {
        "name": "gamma-ldap",
        "providerId": "ldap",
        "config": {
          "enabled": [
            "true"
          ],
          "priority": [
            "0"
          ],
          "editMode": [
            "READ_ONLY"
          ],
          "syncRegistrations": [
            "false"
          ],
          "vendor": [
            "other"
          ],
          "connectionUrl": [
            "ldap://openldap:389"
          ],
          "bindDn": [
            "cn=admin,dc=demo,dc=stoa"
          ],
          "bindCredential": [
            "admin-password"
          ],
          "usersDn": [
            "ou=users,dc=demo,dc=stoa"
          ],
          "usernameLDAPAttribute": [
            "uid"
          ],
          "rdnLDAPAttribute": [
            "uid"
          ],
          "uuidLDAPAttribute": [
            "entryUUID"
          ],
          "userObjectClasses": [
            "inetOrgPerson"
          ],
          "searchScope": [
            "1"
          ],
          "pagination": [
            "true"
          ],
          "importEnabled": [
            "true"
          ],
          "batchSizeForSync": [
            "1000"
          ],
          "fullSyncPeriod": [
            "300"
          ],
          "changedSyncPeriod": [
            "60"
          ],
          "trustEmail": [
            "true"
          ],
          "cachePolicy": [
            "DEFAULT"
          ]
        },
        "subComponents": {
          "org.keycloak.storage.ldap.mappers.LDAPStorageMapper": [
            {
              "name": "username",
              "providerId": "user-attribute-ldap-mapper",
              "config": {
                "ldap.attribute": [
                  "uid"
                ],
                "user.model.attribute": [
                  "username"
                ],
                "is.mandatory.in.ldap": [
                  "true"
                ],
                "read.only": [
                  "true"
                ]
              }
            },
            {
              "name": "email",
              "providerId": "user-attribute-ldap-mapper",
              "config": {
                "ldap.attribute": [
                  "mail"
                ],
                "user.model.attribute": [
                  "email"
                ],
                "is.mandatory.in.ldap": [
                  "false"
                ],
                "read.only": [
                  "true"
                ]
              }
            },
            {
              "name": "first name",
              "providerId": "user-attribute-ldap-mapper",
              "config": {
                "ldap.attribute": [
                  "givenName"
                ],
                "user.model.attribute": [
                  "firstName"
                ],
                "is.mandatory.in.ldap": [
                  "false"
                ],
                "read.only": [
                  "true"
                ]
              }
            },
            {
              "name": "last name",
              "providerId": "user-attribute-ldap-mapper",
              "config": {
                "ldap.attribute": [
                  "sn"
                ],
                "user.model.attribute": [
                  "lastName"
                ],
                "is.mandatory.in.ldap": [
                  "true"
                ],
                "read.only": [
                  "true"
                ]
              }
            }
          ]
        }
      }
    ]
  },
  "clients": [
    {
      "clientId": "federation-demo",
      "name": "Federation Demo Client",
      "description": "Confidential client for token exchange and direct grant",
      "enabled": true,
      "publicClient": false,
      "clientAuthenticatorType": "client-secret",
      "secret": "gamma-demo-secret",
      "standardFlowEnabled": true,
      "directAccessGrantsEnabled": true,
      "serviceAccountsEnabled": true,
      "authorizationServicesEnabled": false,
      "protocol": "openid-connect",
      "redirectUris": [
        "*"
      ],
      "webOrigins": [
        "*"
      ],
      "defaultClientScopes": [
        "web-origins",
        "acr",
        "profile",
        "roles",
        "email"
      ],
      "attributes": {
        "oauth2.token.exchange.grant.enabled": "true"
      },
      "protocolMappers": [
        {
          "name": "audience-mapper",
          "protocol": "openid-connect",
          "protocolMapper": "oidc-audience-mapper",
          "consentRequired": false,
          "config": {
            "included.custom.audience": "stoa-federation-api",
            "id.token.claim": "false",
            "access.token.claim": "true"
          }
        },
        {
          "name": "realm-claim-mapper",
          "protocol": "openid-connect",
          "protocolMapper": "oidc-hardcoded-claim-mapper",
          "consentRequired": false,
          "config": {
            "claim.name": "stoa_realm",
            "claim.value": "demo-org-gamma",
            "id.token.claim": "true",
            "access.token.claim": "true",
            "userinfo.token.claim": "true",
            "jsonType.label": "String"
          }
        }
      ]
    }
  ],
  "sslRequired": "none"
}
