<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800" width="1200" height="800">
  <defs>
    <!-- Gradients -->
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#6366f1"/>
      <stop offset="100%" style="stop-color:#8b5cf6"/>
    </linearGradient>
    <linearGradient id="coreGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    <linearGradient id="authGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f43f5e"/>
      <stop offset="100%" style="stop-color:#e11d48"/>
    </linearGradient>
    <linearGradient id="dataGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b"/>
      <stop offset="100%" style="stop-color:#d97706"/>
    </linearGradient>
    <linearGradient id="obsGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#06b6d4"/>
      <stop offset="100%" style="stop-color:#0891b2"/>
    </linearGradient>
    
    <!-- Shadow filter -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
    
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="800" fill="#f8fafc"/>
  
  <!-- Title -->
  <text x="600" y="40" font-family="Inter, system-ui, sans-serif" font-size="28" font-weight="700" fill="#1e293b" text-anchor="middle">STOA Platform Architecture</text>
  <text x="600" y="65" font-family="Inter, system-ui, sans-serif" font-size="14" fill="#64748b" text-anchor="middle">API &amp; MCP Gateway for the AI Era</text>

  <!-- Users Section -->
  <g transform="translate(50, 100)">
    <rect x="0" y="0" width="180" height="120" rx="12" fill="#e0e7ff" stroke="#6366f1" stroke-width="2" filter="url(#shadow)"/>
    <text x="90" y="25" font-family="Inter, sans-serif" font-size="14" font-weight="600" fill="#4338ca" text-anchor="middle">Users</text>
    
    <g transform="translate(20, 40)">
      <circle cx="20" cy="15" r="12" fill="#818cf8"/>
      <text x="45" y="20" font-family="Inter, sans-serif" font-size="11" fill="#1e293b">Developers</text>
    </g>
    <g transform="translate(20, 65)">
      <circle cx="20" cy="15" r="12" fill="#a78bfa"/>
      <text x="45" y="20" font-family="Inter, sans-serif" font-size="11" fill="#1e293b">Admins</text>
    </g>
    <g transform="translate(20, 90)">
      <circle cx="20" cy="15" r="12" fill="#c4b5fd"/>
      <text x="45" y="20" font-family="Inter, sans-serif" font-size="11" fill="#1e293b">AI Agents</text>
    </g>
  </g>

  <!-- Frontend Section -->
  <g transform="translate(300, 100)">
    <rect x="0" y="0" width="200" height="120" rx="12" fill="#fae8ff" stroke="#d946ef" stroke-width="2" filter="url(#shadow)"/>
    <text x="100" y="25" font-family="Inter, sans-serif" font-size="14" font-weight="600" fill="#a21caf" text-anchor="middle">Frontend</text>
    
    <g transform="translate(15, 40)">
      <rect x="0" y="0" width="75" height="65" rx="8" fill="#f5d0fe"/>
      <text x="37" y="25" font-family="Inter, sans-serif" font-size="10" font-weight="500" fill="#86198f" text-anchor="middle">Portal</text>
      <text x="37" y="40" font-family="Inter, sans-serif" font-size="8" fill="#a21caf" text-anchor="middle">React</text>
      <text x="37" y="52" font-family="Inter, sans-serif" font-size="8" fill="#a21caf" text-anchor="middle">TypeScript</text>
    </g>
    <g transform="translate(110, 40)">
      <rect x="0" y="0" width="75" height="65" rx="8" fill="#f5d0fe"/>
      <text x="37" y="25" font-family="Inter, sans-serif" font-size="10" font-weight="500" fill="#86198f" text-anchor="middle">Console</text>
      <text x="37" y="40" font-family="Inter, sans-serif" font-size="8" fill="#a21caf" text-anchor="middle">React</text>
      <text x="37" y="52" font-family="Inter, sans-serif" font-size="8" fill="#a21caf" text-anchor="middle">TypeScript</text>
    </g>
  </g>

  <!-- Core Services Section -->
  <g transform="translate(300, 260)">
    <rect x="0" y="0" width="200" height="150" rx="12" fill="#d1fae5" stroke="#10b981" stroke-width="2" filter="url(#shadow)"/>
    <text x="100" y="25" font-family="Inter, sans-serif" font-size="14" font-weight="600" fill="#047857" text-anchor="middle">Core Services</text>
    
    <g transform="translate(15, 40)">
      <rect x="0" y="0" width="170" height="45" rx="8" fill="#a7f3d0"/>
      <text x="85" y="20" font-family="Inter, sans-serif" font-size="11" font-weight="500" fill="#047857" text-anchor="middle">Control Plane API</text>
      <text x="85" y="35" font-family="Inter, sans-serif" font-size="9" fill="#059669" text-anchor="middle">Python â€¢ FastAPI â€¢ Async</text>
    </g>
    <g transform="translate(15, 95)">
      <rect x="0" y="0" width="170" height="45" rx="8" fill="#6ee7b7"/>
      <text x="85" y="20" font-family="Inter, sans-serif" font-size="11" font-weight="500" fill="#047857" text-anchor="middle">MCP Gateway</text>
      <text x="85" y="35" font-family="Inter, sans-serif" font-size="9" fill="#059669" text-anchor="middle">Rust â€¢ Tokio â€¢ Hyper</text>
    </g>
  </g>

  <!-- Auth Section -->
  <g transform="translate(50, 280)">
    <rect x="0" y="0" width="180" height="130" rx="12" fill="#fee2e2" stroke="#f43f5e" stroke-width="2" filter="url(#shadow)"/>
    <text x="90" y="25" font-family="Inter, sans-serif" font-size="14" font-weight="600" fill="#be123c" text-anchor="middle">Security</text>
    
    <g transform="translate(15, 40)">
      <rect x="0" y="0" width="150" height="35" rx="6" fill="#fecaca"/>
      <text x="75" y="15" font-family="Inter, sans-serif" font-size="10" font-weight="500" fill="#be123c" text-anchor="middle">Keycloak</text>
      <text x="75" y="28" font-family="Inter, sans-serif" font-size="8" fill="#e11d48" text-anchor="middle">OIDC â€¢ OAuth2 â€¢ RBAC</text>
    </g>
    <g transform="translate(15, 85)">
      <rect x="0" y="0" width="150" height="35" rx="6" fill="#fecaca"/>
      <text x="75" y="15" font-family="Inter, sans-serif" font-size="10" font-weight="500" fill="#be123c" text-anchor="middle">HashiCorp Vault</text>
      <text x="75" y="28" font-family="Inter, sans-serif" font-size="8" fill="#e11d48" text-anchor="middle">Secrets â€¢ API Keys â€¢ 2FA</text>
    </g>
  </g>

  <!-- Data Layer -->
  <g transform="translate(50, 460)">
    <rect x="0" y="0" width="180" height="130" rx="12" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" filter="url(#shadow)"/>
    <text x="90" y="25" font-family="Inter, sans-serif" font-size="14" font-weight="600" fill="#b45309" text-anchor="middle">Data Layer</text>
    
    <g transform="translate(15, 40)">
      <rect x="0" y="0" width="150" height="35" rx="6" fill="#fde68a"/>
      <text x="75" y="15" font-family="Inter, sans-serif" font-size="10" font-weight="500" fill="#b45309" text-anchor="middle">PostgreSQL</text>
      <text x="75" y="28" font-family="Inter, sans-serif" font-size="8" fill="#d97706" text-anchor="middle">Subscriptions â€¢ Tenants</text>
    </g>
    <g transform="translate(15, 85)">
      <rect x="0" y="0" width="150" height="35" rx="6" fill="#fde68a"/>
      <text x="75" y="15" font-family="Inter, sans-serif" font-size="10" font-weight="500" fill="#b45309" text-anchor="middle">Redis</text>
      <text x="75" y="28" font-family="Inter, sans-serif" font-size="8" fill="#d97706" text-anchor="middle">Cache â€¢ Sessions â€¢ Rate Limit</text>
    </g>
  </g>

  <!-- Observability -->
  <g transform="translate(300, 460)">
    <rect x="0" y="0" width="200" height="130" rx="12" fill="#cffafe" stroke="#06b6d4" stroke-width="2" filter="url(#shadow)"/>
    <text x="100" y="25" font-family="Inter, sans-serif" font-size="14" font-weight="600" fill="#0e7490" text-anchor="middle">Observability</text>
    
    <g transform="translate(10, 40)">
      <rect x="0" y="0" width="55" height="75" rx="6" fill="#a5f3fc"/>
      <text x="27" y="30" font-family="Inter, sans-serif" font-size="9" font-weight="500" fill="#0e7490" text-anchor="middle">Prometheus</text>
      <text x="27" y="50" font-family="Inter, sans-serif" font-size="8" fill="#06b6d4" text-anchor="middle">Metrics</text>
    </g>
    <g transform="translate(72, 40)">
      <rect x="0" y="0" width="55" height="75" rx="6" fill="#a5f3fc"/>
      <text x="27" y="30" font-family="Inter, sans-serif" font-size="9" font-weight="500" fill="#0e7490" text-anchor="middle">Grafana</text>
      <text x="27" y="50" font-family="Inter, sans-serif" font-size="8" fill="#06b6d4" text-anchor="middle">Dashboards</text>
    </g>
    <g transform="translate(135, 40)">
      <rect x="0" y="0" width="55" height="75" rx="6" fill="#a5f3fc"/>
      <text x="27" y="30" font-family="Inter, sans-serif" font-size="9" font-weight="500" fill="#0e7490" text-anchor="middle">Loki</text>
      <text x="27" y="50" font-family="Inter, sans-serif" font-size="8" fill="#06b6d4" text-anchor="middle">Logs</text>
    </g>
  </g>

  <!-- MCP Servers -->
  <g transform="translate(570, 260)">
    <rect x="0" y="0" width="200" height="150" rx="12" fill="#fce7f3" stroke="#ec4899" stroke-width="2" filter="url(#shadow)"/>
    <text x="100" y="25" font-family="Inter, sans-serif" font-size="14" font-weight="600" fill="#be185d" text-anchor="middle">MCP Servers</text>
    
    <g transform="translate(15, 40)">
      <rect x="0" y="0" width="170" height="30" rx="6" fill="#fbcfe8"/>
      <text x="85" y="20" font-family="Inter, sans-serif" font-size="10" fill="#be185d" text-anchor="middle">ðŸ”§ CRM Tools (Salesforce, HubSpot)</text>
    </g>
    <g transform="translate(15, 75)">
      <rect x="0" y="0" width="170" height="30" rx="6" fill="#fbcfe8"/>
      <text x="85" y="20" font-family="Inter, sans-serif" font-size="10" fill="#be185d" text-anchor="middle">ðŸ’° Billing Tools (Stripe, Invoice)</text>
    </g>
    <g transform="translate(15, 110)">
      <rect x="0" y="0" width="170" height="30" rx="6" fill="#fbcfe8"/>
      <text x="85" y="20" font-family="Inter, sans-serif" font-size="10" fill="#be185d" text-anchor="middle">âš¡ Custom Enterprise Tools</text>
    </g>
  </g>

  <!-- Kubernetes cluster boundary -->
  <g transform="translate(560, 100)">
    <rect x="0" y="0" width="220" height="120" rx="12" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2" stroke-dasharray="8,4" filter="url(#shadow)"/>
    <text x="110" y="25" font-family="Inter, sans-serif" font-size="14" font-weight="600" fill="#475569" text-anchor="middle">Kubernetes</text>
    <text x="110" y="45" font-family="Inter, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">stoa-system namespace</text>
    
    <g transform="translate(20, 55)">
      <rect x="0" y="0" width="80" height="50" rx="6" fill="#e2e8f0"/>
      <text x="40" y="20" font-family="Inter, sans-serif" font-size="9" fill="#475569" text-anchor="middle">Ingress</text>
      <text x="40" y="35" font-family="Inter, sans-serif" font-size="8" fill="#64748b" text-anchor="middle">nginx</text>
    </g>
    <g transform="translate(120, 55)">
      <rect x="0" y="0" width="80" height="50" rx="6" fill="#e2e8f0"/>
      <text x="40" y="20" font-family="Inter, sans-serif" font-size="9" fill="#475569" text-anchor="middle">Cert-Manager</text>
      <text x="40" y="35" font-family="Inter, sans-serif" font-size="8" fill="#64748b" text-anchor="middle">TLS</text>
    </g>
  </g>

  <!-- Connection lines -->
  <!-- Users to Frontend -->
  <path d="M 230 160 L 300 160" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Frontend to Core -->
  <path d="M 400 220 L 400 260" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Core to Auth -->
  <path d="M 300 335 L 230 335" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Core to Data -->
  <path d="M 300 380 L 200 460" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Core to Observability -->
  <path d="M 400 410 L 400 460" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Gateway to MCP Servers -->
  <path d="M 500 335 L 570 335" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Legend -->
  <g transform="translate(850, 500)">
    <rect x="0" y="0" width="300" height="180" rx="12" fill="white" stroke="#e2e8f0" stroke-width="1"/>
    <text x="150" y="25" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#1e293b" text-anchor="middle">Technology Stack</text>
    
    <g transform="translate(20, 45)">
      <rect x="0" y="0" width="12" height="12" rx="2" fill="#10b981"/>
      <text x="20" y="10" font-family="Inter, sans-serif" font-size="10" fill="#374151">Rust + Tokio (Gateway)</text>
    </g>
    <g transform="translate(20, 65)">
      <rect x="0" y="0" width="12" height="12" rx="2" fill="#6366f1"/>
      <text x="20" y="10" font-family="Inter, sans-serif" font-size="10" fill="#374151">Python + FastAPI (API)</text>
    </g>
    <g transform="translate(20, 85)">
      <rect x="0" y="0" width="12" height="12" rx="2" fill="#d946ef"/>
      <text x="20" y="10" font-family="Inter, sans-serif" font-size="10" fill="#374151">React + TypeScript (UI)</text>
    </g>
    <g transform="translate(20, 105)">
      <rect x="0" y="0" width="12" height="12" rx="2" fill="#f59e0b"/>
      <text x="20" y="10" font-family="Inter, sans-serif" font-size="10" fill="#374151">PostgreSQL + Redis (Data)</text>
    </g>
    <g transform="translate(20, 125)">
      <rect x="0" y="0" width="12" height="12" rx="2" fill="#f43f5e"/>
      <text x="20" y="10" font-family="Inter, sans-serif" font-size="10" fill="#374151">Keycloak + Vault (Auth)</text>
    </g>
    <g transform="translate(20, 145)">
      <rect x="0" y="0" width="12" height="12" rx="2" fill="#06b6d4"/>
      <text x="20" y="10" font-family="Inter, sans-serif" font-size="10" fill="#374151">Prometheus + Grafana + Loki</text>
    </g>
  </g>

  <!-- Footer -->
  <text x="600" y="780" font-family="Inter, sans-serif" font-size="11" fill="#94a3b8" text-anchor="middle">Â© 2026 STOA Platform â€¢ gostoa.dev â€¢ Apache 2.0 License</text>
</svg>
