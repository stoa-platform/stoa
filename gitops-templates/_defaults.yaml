# Global Default Variables
# These are overridden by environment-specific and tenant-specific configs
# Used by ArgoCD ApplicationSets and Variable Resolver

# =============================================================================
# INFRASTRUCTURE - Core platform configuration
# =============================================================================
infrastructure:
  # GitLab GitOps repository
  GITLAB_URL: "https://gitlab.com"
  GITLAB_PROJECT_PATH: "cab6961310/stoa-gitops"
  GITLAB_REPO_URL: "https://gitlab.com/cab6961310/stoa-gitops.git"
  GITLAB_DEFAULT_BRANCH: "main"

  # Kubernetes
  K8S_CLUSTER_URL: "https://kubernetes.default.svc"
  K8S_NAMESPACE_PREFIX: "stoa"

  # Base domain
  BASE_DOMAIN: "stoa.cab-i.com"

  # ArgoCD
  ARGOCD_NAMESPACE: "argocd"
  ARGOCD_URL: "https://argocd.${BASE_DOMAIN}"

# =============================================================================
# SERVICES - Platform services URLs
# =============================================================================
services:
  GATEWAY_URL: "https://gateway.${BASE_DOMAIN}"
  PORTAL_URL: "https://portal.${BASE_DOMAIN}"
  CONTROL_PLANE_API_URL: "https://api.${BASE_DOMAIN}"
  CONTROL_PLANE_UI_URL: "https://console.${BASE_DOMAIN}"
  KEYCLOAK_URL: "https://auth.${BASE_DOMAIN}"
  AWX_URL: "https://awx.${BASE_DOMAIN}"
  REDPANDA_URL: "redpanda.stoa-system.svc.cluster.local:9092"

# =============================================================================
# VARIABLES - Default values for API/Application configuration
# =============================================================================
variables:
  # Backend defaults
  BACKEND_TIMEOUT: "30"
  BACKEND_RETRY_COUNT: "3"
  BACKEND_RETRY_DELAY: "1000"

  # Rate limiting defaults
  RATE_LIMIT_REQUESTS: "100"
  RATE_LIMIT_WINDOW: "60"
  RATE_LIMIT_BURST: "20"

  # Caching defaults
  CACHE_ENABLED: "true"
  CACHE_TTL: "300"

  # Logging defaults
  LOG_LEVEL: "INFO"
  LOG_FORMAT: "json"

  # Security defaults
  CORS_ENABLED: "true"
  CORS_MAX_AGE: "3600"
  CORS_ALLOWED_ORIGINS: ""

  # Monitoring defaults
  METRICS_ENABLED: "true"
  TRACING_ENABLED: "true"
  TRACING_SAMPLE_RATE: "0.1"

# =============================================================================
# POLICIES - Default policies applied to all APIs
# =============================================================================
default_policies:
  - name: rate-limiting
    enabled: true
  - name: cors
    enabled: true
  - name: request-validation
    enabled: true

# =============================================================================
# ENVIRONMENTS - Available environments
# =============================================================================
environments:
  - name: dev
    cluster: "${K8S_CLUSTER_URL}"
    namespace_suffix: "dev"
    auto_sync: true
  - name: staging
    cluster: "${K8S_CLUSTER_URL}"
    namespace_suffix: "staging"
    auto_sync: true
  - name: prod
    cluster: "${K8S_CLUSTER_URL}"
    namespace_suffix: "prod"
    auto_sync: false

# =============================================================================
# VAULT - Secret management
# =============================================================================
vault:
  enabled: false
  address: "https://vault.${BASE_DOMAIN}"
  path_prefix: "secret/data"
  auth_method: "kubernetes"
