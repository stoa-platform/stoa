# Production Environment Configuration
environment: prod
description: Production environment for live APIs

variables:
  # Domain configuration
  BASE_DOMAIN: "apim.cab-i.com"
  GATEWAY_URL: "https://gateway.apim.cab-i.com"
  PORTAL_URL: "https://portal.apim.cab-i.com"

  # Backend configuration
  BACKEND_TIMEOUT: "30"
  BACKEND_RETRY_COUNT: "3"
  BACKEND_RETRY_DELAY: "500"

  # Rate limiting (strict)
  RATE_LIMIT_REQUESTS: "100"
  RATE_LIMIT_WINDOW: "60"
  RATE_LIMIT_BURST: "20"

  # Logging
  LOG_LEVEL: "WARNING"
  LOG_FORMAT: "json"

  # Security (strict)
  CORS_ALLOWED_ORIGINS: "https://*.apim.cab-i.com"
  CORS_MAX_AGE: "86400"

  # Monitoring
  METRICS_ENABLED: "true"
  TRACING_ENABLED: "true"
  TRACING_SAMPLE_RATE: "0.1"

# Production-specific settings
settings:
  auto_deploy: false
  require_approval: true
  approval_roles:
    - cpi-admin
  require_staging_validation: true
  allow_untested_apis: false
  canary_deployment: true
  canary_percentage: 10

# Vault path prefix for this environment
vault:
  path_prefix: "secret/data/prod"

# Alerting configuration
alerting:
  enabled: true
  channels:
    - type: slack
      webhook: vault:secret/data/prod/alerts#slack_webhook
    - type: pagerduty
      integration_key: vault:secret/data/prod/alerts#pagerduty_key
