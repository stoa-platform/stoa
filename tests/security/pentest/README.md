# STOA Platform - Manual Penetration Testing

> **Phase**: 9.5 - Production Readiness
> **Ticket**: CAB-236
> **Last Updated**: 2026-01-05

## Overview

This directory contains resources for professional manual penetration testing of the STOA Platform before production deployment.

**Key Difference from CAB-108 (OWASP ZAP):**
- CAB-108: Automated vulnerability scanning
- CAB-236: Manual exploitation by security experts

## Scope

### In-Scope Targets

| Component | URL | Type |
|-----------|-----|------|
| Control Plane API | `https://api.staging.stoa.cab-i.com` | FastAPI REST |
| Console UI | `https://console.staging.stoa.cab-i.com` | React SPA |
| MCP Gateway | `https://mcp.staging.stoa.cab-i.com` | AI API Gateway |
| API Gateway | `https://apis.staging.stoa.cab-i.com` | webMethods Gateway |
| Keycloak | `https://auth.staging.stoa.cab-i.com` | OIDC Provider |
| AWX | `https://awx.staging.stoa.cab-i.com` | Automation |

### Out-of-Scope

- AWS infrastructure (managed services)
- Third-party SaaS integrations
- Physical security
- Social engineering

## Test Categories

| Category | Description | Est. Duration |
|----------|-------------|---------------|
| Network Pentest | Port scanning, service enumeration, network segmentation | 0.5 day |
| Web Application | OWASP Top 10, injection, XSS, CSRF, authN/authZ bypass | 1.5 days |
| API Security | Mass assignment, BOLA/IDOR, rate limiting bypass | 1 day |
| Container Security | Container escape, privilege escalation, secrets exposure | 0.5 day |
| Infrastructure | K8s RBAC, AWS IAM, lateral movement | 0.5 day |

**Total Estimated Duration**: 4-5 days + 1 day reporting

## Quick Start

### Prerequisites

```bash
# Required tools
- Burp Suite Pro (web/API testing)
- Kali Linux or Parrot Security
- kubectl access to staging cluster
- AWS credentials (read-only for enumeration)
```

### Running Tests

```bash
# 1. Authentication bypass tests
./scripts/test-auth-bypass.sh

# 2. BOLA/IDOR tests
./scripts/test-bola-idor.sh

# 3. K8s RBAC tests
./scripts/test-k8s-rbac.sh

# 4. AWS IAM enumeration
./scripts/test-aws-iam.sh

# 5. Full manual checklist
cat checklists/owasp-api-top10.md
```

## Directory Structure

```
tests/security/pentest/
├── README.md                    # This file
├── methodology.md               # Detailed test methodology
├── checklists/
│   ├── owasp-api-top10.md      # API security checklist
│   ├── owasp-web-top10.md      # Web app checklist
│   ├── k8s-security.md         # Kubernetes checklist
│   └── auth-bypass.md          # Authentication bypass checklist
├── scripts/
│   ├── test-auth-bypass.sh     # Auth bypass automation
│   ├── test-bola-idor.sh       # BOLA/IDOR tests
│   ├── test-k8s-rbac.sh        # K8s RBAC tests
│   ├── test-aws-iam.sh         # AWS IAM enumeration
│   └── test-rate-limiting.sh   # Rate limiting tests
├── wordlists/
│   ├── api-endpoints.txt       # API endpoint fuzzing
│   ├── parameters.txt          # Parameter fuzzing
│   └── jwt-secrets.txt         # JWT secret brute force
├── templates/
│   └── pentest-report.md       # Report template
└── results/                    # Test results (gitignored)
```

## Rules of Engagement

### Allowed Actions

- Port scanning and service enumeration
- Authentication and authorization testing
- Injection testing (SQL, NoSQL, Command)
- API fuzzing and manipulation
- Rate limiting bypass attempts
- Container security testing
- K8s RBAC verification

### Prohibited Actions

- Denial of Service attacks (except controlled rate limiting tests)
- Data destruction or modification of production data
- Lateral movement to production systems
- Social engineering of employees
- Physical security testing
- Testing without written authorization

## Documentation

- [Detailed Methodology](methodology.md)
- [OWASP API Top 10 Checklist](checklists/owasp-api-top10.md)
- [Report Template](templates/pentest-report.md)

## Contact

- **Security Lead**: security@cab-i.com
- **Emergency**: In case of critical finding, contact immediately

## Related

- [CAB-108 - Automated Security Scans](../README.md)
- [SLO/SLA Documentation](../../../docs/SLO-SLA.md)
